(function(e){function t(t){for(var n,l,o=t[0],s=t[1],c=t[2],d=0,m=[];d<o.length;d++)l=o[d],r[l]&&m.push(r[l][0]),r[l]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var s=a[o];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},r={index:0},i=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/unlock/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},2:function(e,t){},"25d1":function(e,t,a){},2686:function(e,t,a){"use strict";var n=a("c85e"),r=a.n(n);r.a},3:function(e,t){},4:function(e,t){},"4e91":function(e,t,a){"use strict";var n=a("25d1"),r=a.n(n);r.a},"55d6":function(e,t,a){"use strict";var n=a("55fd"),r=a.n(n);r.a},"55fd":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("14c6"),a("08c1"),a("4842"),a("d9fc");var n=a("2b0e"),r=a("bb71");a("da64");n["a"].use(r["a"],{iconfont:"md"});var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("router-view")],1)},l=[],o={name:"App",components:{},data:function(){return{}}},s=o,c=a("2877"),u=a("6544"),d=a.n(u),m=a("7496"),w=Object(c["a"])(s,i,l,!1,null,null,null),p=w.exports;d()(w,{VApp:m["a"]});var f=a("6314"),v=a.n(f),g=a("8c4f"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Head"),a("Content"),a("Foot")],1)},b=[],k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Head"}},[a("v-toolbar",{attrs:{color:"blue darken-3",app:""}},[a("v-spacer"),a("v-spacer"),a("v-toolbar-items",[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{flat:"",dark:"",large:""}},n),[e._v("\n            "+e._s(e.path)+"\n            "),a("v-icon",{attrs:{dark:"",left:""}},[e._v("arrow_drop_down")])],1)]}}])},[a("v-list",[a("v-list-tile",[a("v-list-tile-title",[a("v-icon",{attrs:{dark:"",color:"red"}},[e._v("person_pin")]),a("a",{attrs:{href:"#/"}},[e._v(" 我的锁定钱包")])],1)],1),a("v-list-tile",[a("v-list-tile-title",[a("v-icon",{attrs:{dark:"",color:"red"}},[e._v("perm_contact_calendar")]),a("a",{attrs:{href:"#/creator"}},[e._v(" 创建锁定钱包")])],1)],1),a("v-list-tile",[a("v-list-tile-title",[a("v-icon",{attrs:{dark:"",color:"red"}},[e._v(" monetization_on")]),a("a",{attrs:{href:"#/manager"}},[e._v(" 管理锁定钱包")])],1)],1)],1)],1)],1),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("v-btn",{attrs:{flat:"",dark:"",large:"",href:"#/transactions"}},[e._v("\n        Transactions\n      ")])],1),a("v-spacer"),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[e.isonline?a("span",{staticStyle:{color:"white"}},[a("br"),e._v("\n      \n         "+e._s(e.account)+"\n      ")]):e._e(),e.isonline?e._e():a("v-text-field",{staticStyle:{width:"380px"},attrs:{"single-line":"",outlined:"",dark:""},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}}),e.isonline?e._e():a("v-btn",{attrs:{flat:"",icon:"",color:"white"},on:{click:e.search}},[a("v-icon",[e._v("search")])],1)],1),a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("span",{staticStyle:{color:"white",margin:"0 10px"}},[a("br"),e._v("\n        "+e._s((e.balance/1e18).toFixed(3))+" KAL\n      ")])]),e.isonline?a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("v-btn",{attrs:{flat:"",icon:"",color:"#2de234"}},[a("i",{staticClass:"fas fa-circle"})])],1):e._e(),e.isonline?e._e():a("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[a("v-btn",{attrs:{flat:"",icon:"",dark:""},on:{click:e.offline}},[a("i",{staticClass:"fas fa-plug"})])],1)],1)],1)},y=[],_=(a("96cf"),a("28a5"),a("3b8d")),T=(a("386d"),{name:"Head",data:function(){return{isonline:!1,loading:!1,balance:0,account:"0x00000000000000000000000000000000000000000",web3:null,path:""}},mounted:function(){var e=this;"/"==e.$route.path?e.path="我的锁定钱包":"/creator"==e.$route.path?e.path="创建锁定钱包":"/manager"==e.$route.path?e.path="管理锁定钱包":e.path="锁定钱包";var t=A("address");if(""!=t)return e.account=t.toLowerCase(),e.web3=new window.Web(new window.Web.providers.HttpProvider(window.host)),M(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var a=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(a),O(e))},1e3);return!1}O(e)}},methods:{offline:function(){"undefined"!==typeof window.ethereum?ethereum.enable().then(function(e){if("undefined"===typeof web3);else{var t=window.location.href,a=(window.location.search.substr(1),t.substr(0,t.indexOf("?")));window.location.href=a}}).catch(function(e){console.log(e)}):confirm("Download MetaMask?")&&window.open("https://metamask.io/")},getBalance:function(){var e=this;e.loading=!0;var t=e.web3;t.eth.getBalance(e.account).then(function(t){e.loading=!1,e.balance=t})},search:function(){window.location.href="?address="+this.account}}});function O(e){e.account=ethereum.selectedAddress;var t=e.web3;t.eth.getBalance(e.account).then(function(t){e.balance=t}),e.isonline=!0;setInterval(function(){ethereum.selectedAddress!==e.account&&e.$router.go(0),t.eth.getBalance(e.account).then(function(t){e.balance=t})},1e3)}function M(e){return C.apply(this,arguments)}function C(){return C=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=t.web3,a.eth.getBalance(t.account).then(function(e){t.balance=e});case 2:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function A(e){for(var t=window.location.search.substring(1),a=t.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(r[0]==e)return r[1]}return""}var V=T,R=(a("4e91"),a("8336")),U=a("132d"),S=a("8860"),I=a("ba95"),W=a("5d23"),j=a("e449"),B=a("9910"),$=a("2677"),E=a("71d9"),L=a("2a7f"),F=Object(c["a"])(V,k,y,!1,null,null,null),P=F.exports;d()(F,{VBtn:R["a"],VIcon:U["a"],VList:S["a"],VListTile:I["a"],VListTileTitle:W["b"],VMenu:j["a"],VSpacer:B["a"],VTextField:$["a"],VToolbar:E["a"],VToolbarItems:L["a"]});var H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md10:"",xl8:""}},[a("v-card",[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",[e._v("Transactions  ")]),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{round:"",color:"error",outline:""},on:{click:e.RemoveAll}},[e._v("Remove All")])],1),a("v-card-text",{staticClass:"px-0"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.txlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-start"},[a("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                      "+e._s(t.item.hash)+"\n                      ")])]),a("td",{staticClass:"text-xs-start"},[a("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.from)+"\n                    ")])]),a("td",{staticClass:"text-xs-start"},[a("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.to)+"\n                    ")])]),a("td",{staticClass:"text-xs-start"},[e._v(e._s(t.item.value/1e18))]),a("td",{staticClass:"text-xs-start"},[a("span",{staticStyle:{"max-width":"200px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.input)+"\n                    ")])]),a("td",{staticClass:"text-xs-start"},[e._v(e._s("0x1"==t.item.status?"success":"0x0"==t.item.status?"failed":"pending"))]),a("td",{staticClass:"text-xs-start"},[a("v-icon",{on:{click:function(a){return e.deleteTx(t.item)}}},[e._v("delete")])],1)]}}])}),a("div",{staticClass:"text-xs-right pt-2"},[a("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1)],1)},N=[],K=[{text:"Hash",value:"hash",align:"left",sortable:!1},{text:"From",value:"from",align:"left",sortable:!1},{text:"To",value:"to",sortable:!1},{text:"Value (KAL)",value:"value",sortable:!1},{text:"Data",value:"input",sortable:!1},{text:"Status",value:"status",sortable:!1},{text:"Remove",value:"remove",sortable:!1}],D={name:"Content",components:{},data:function(){return{dialog:!1,headers:K,transaction:{to:"",value:"",input:""},txlist:[],pagination:{rowsPerPage:5,totalItems:11}}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.txlist.length/this.pagination.rowsPerPage)}},mounted:function(){var e=this;if(null!=window.txlist){for(var t=0;t<window.txlist.length;t++)null==window.txlist[t]["status"]&&(window.txlist[t]["status"]="pending");e.txlist=window.txlist}z(e)},methods:{deleteTx:function(e){var t=this.txlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&(this.txlist.splice(t,1),window.txlist=this.txlist),this.pagination.totalItems=this.txlist.length},RemoveAll:function(){confirm("Are you sure you want to delete all item?")&&(this.txlist=[],window.txlist=[],this.pagination.totalItems=this.txlist.length)},sendTransaction:function(){}}};function z(e){if("undefined"!=typeof window.ethereum)for(var t=0;t<e.txlist.length;t++)Y(e,t)}function Y(e,t){if("undefined"!=typeof window.ethereum){e.txlist[t]["blockNubmer"];var a=e.txlist[t]["hash"];web3.eth.getTransactionReceipt(a,function(a,n){null!=n&&(e.txlist[t]["blockNumber"]=n["blockNumber"],e.txlist[t]["status"]=n["status"])})}}var J=D,q=(a("55d6"),a("b0af")),G=a("99d9"),Q=a("a523"),X=a("549c"),Z=a("8fea"),ee=a("0e8f"),te=a("a722"),ae=a("891e"),ne=Object(c["a"])(J,H,N,!1,null,null,null),re=ne.exports;d()(ne,{VBtn:R["a"],VCard:q["a"],VCardText:G["b"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VFlex:ee["a"],VIcon:U["a"],VLayout:te["a"],VPagination:ae["a"],VSpacer:B["a"],VToolbar:E["a"],VToolbarTitle:L["b"]});var ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Foot"}},[a("v-footer",{attrs:{dark:"",color:"blue darken-3",height:"auto"}},[a("v-spacer"),a("v-flex",{attrs:{calss:"white--text"}},[e._v("\n      ©2019 — "),a("strong",[e._v("kaleidochain")])])],1)],1)},le=[],oe={name:"Foot"},se=oe,ce=a("553a"),ue=Object(c["a"])(se,ie,le,!1,null,null,null),de=ue.exports;d()(ue,{VFlex:ee["a"],VFooter:ce["a"],VSpacer:B["a"]});var me={name:"Transactions",components:{Head:P,Content:re,Foot:de},data:function(){return{}}},we=me,pe=Object(c["a"])(we,x,b,!1,null,null,null),fe=pe.exports;d()(pe,{VApp:m["a"]});var ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Head"),a("Content"),a("Foot")],1)},he=[],ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[a("v-card",[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",[e._v("Wallets List")]),a("v-spacer")],1),a("v-card-text",{staticClass:"px-0"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))]),a("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",outline:"",color:"info"},on:{click:function(a){e.dialog_replaceOwner=!0,e.dialog_item=t.item}}},[e._v("\n                        修改\n                    ")])],1),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.miner)+"\n\n                      "),a("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,outline:"",small:"",flat:"",color:"info"},on:{click:function(a){e.dialog_registerminer=!0,e.dialog_item=t.item}}},[e._v("\n                        注册\n                    ")])],1),a("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToUnlockAll))+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.balance/1e18)+"\n                      ")]),a("td",{staticClass:"text-xs-center"},[e._v(e._s((1*t.item.balance+1*t.item.totalWithdrawals-1*t.item.unlocked)/1e18)+"\n                   \n                      ")]),a("td",{staticClass:"text-xs-center"},[e._v(e._s((t.item.unlocked-t.item.totalWithdrawals)/1e18)+"\n                    "),a("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",color:"info",outline:""},on:{click:function(a){e.dialog_withdraw=!0,e.dialog_item=t.item,e.wallet.withdraw=(1*t.item.unlocked-1*t.item.totalWithdrawals)/1e18}}},[e._v("提取")])],1),a("td",{staticClass:"text-xs-center"},[e._v("\n                      "+e._s(t.item.totalWithdrawals/1e18)+"\n                  ")])]}}])}),a("div",{staticClass:"text-xs-right pt-2"},[a("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("New Wallet")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}}),a("v-text-field",{attrs:{label:"Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}}),a("v-text-field",{attrs:{label:"TimeToStartUnlocking (timestamp)"},model:{value:e.wallet.TimeToStartUnlocking,callback:function(t){e.$set(e.wallet,"TimeToStartUnlocking",t)},expression:"wallet.TimeToStartUnlocking"}}),a("v-text-field",{attrs:{label:"TimeInterval (secs)"},model:{value:e.wallet.TimeInterval,callback:function(t){e.$set(e.wallet,"TimeInterval",t)},expression:"wallet.TimeInterval"}}),a("v-text-field",{attrs:{label:"AmountOfEachUnlock (KAL)"},model:{value:e.wallet.AmountOfEachUnlock,callback:function(t){e.$set(e.wallet,"AmountOfEachUnlock",t)},expression:"wallet.AmountOfEachUnlock"}}),a("v-text-field",{attrs:{label:"TimeToUnlockAll (timestamp)"},model:{value:e.wallet.TimeToUnlockAll,callback:function(t){e.$set(e.wallet,"TimeToUnlockAll",t)},expression:"wallet.TimeToUnlockAll"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.creatWallet}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceManager,callback:function(t){e.dialog_replaceManager=t},expression:"dialog_replaceManager"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Replace Manager")]),a("v-card-text",[a("v-text-field",{attrs:{label:"New Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.replaceManager}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceManager=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceOwner,callback:function(t){e.dialog_replaceOwner=t},expression:"dialog_replaceOwner"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Replace Owner")]),a("v-card-text",[a("v-text-field",{attrs:{label:"New Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.replaceOwner}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceOwner=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_registerminer,callback:function(t){e.dialog_registerminer=t},expression:"dialog_registerminer"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Register Miner")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Start Block"},model:{value:e.registerminer.start,callback:function(t){e.$set(e.registerminer,"start",t)},expression:"registerminer.start"}}),a("v-text-field",{attrs:{label:"Lifespan"},model:{value:e.registerminer.lifespan,callback:function(t){e.$set(e.registerminer,"lifespan",t)},expression:"registerminer.lifespan"}}),a("v-text-field",{attrs:{label:"vrf Verifier"},model:{value:e.registerminer.vrfVerifier,callback:function(t){e.$set(e.registerminer,"vrfVerifier",t)},expression:"registerminer.vrfVerifier"}}),a("v-text-field",{attrs:{label:"vote Verifier"},model:{value:e.registerminer.voteVerifier,callback:function(t){e.$set(e.registerminer,"voteVerifier",t)},expression:"registerminer.voteVerifier"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.registerMiner}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_registerminer=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_sendTransaction,callback:function(t){e.dialog_sendTransaction=t},expression:"dialog_sendTransaction"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Send Transaction")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.Value,callback:function(t){e.$set(e.wallet,"Value",t)},expression:"wallet.Value"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.sendTransaction}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_sendTransaction=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_withdraw,callback:function(t){e.dialog_withdraw=t},expression:"dialog_withdraw"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Withdraw")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.withdraw,callback:function(t){e.$set(e.wallet,"withdraw",t)},expression:"wallet.withdraw"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.withdraw}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_withdraw=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_revoke,callback:function(t){e.dialog_revoke=t},expression:"dialog_revoke"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Revoke")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.revoke,callback:function(t){e.$set(e.wallet,"revoke",t)},expression:"wallet.revoke"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.revoke}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_revoke=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},xe=[],be=(a("6b54"),[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",align:"center",sortable:!1},{text:"Miner",value:"miner",sortable:!1,align:"center"},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1,align:"center"},{text:"UnlockAll",value:"timeToUnlockAll",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1,align:"center"},{text:"待解锁 (KAL)",value:"balance",sortable:!1,align:"center"},{text:"待提取 (KAL)",value:"unlocked",sortable:!1,align:"center"},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1,align:"center"}]),ke={name:"Content",components:{},data:function(){return{account:"",web3:null,viewmodel:!1,dialog:!1,dialog_replaceManager:!1,dialog_replaceOwner:!1,dialog_registerminer:!1,dialog_sendTransaction:!1,dialog_withdraw:!1,dialog_revoke:!1,dialog_item:null,timer:null,now:0,headers:be,walletlist:[],wallet:{Manager:"",Owner:"",TimeToStartUnlocking:1,TimeInterval:1,AmountOfEachUnlock:1,TimeToUnlockAll:"",Value:1},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:100,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=Ke("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),ye(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var a=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(a),e.account=ethereum.selectedAddress.toLowerCase(),ye(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),ye(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;$e(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceManager:function(){var e=this;Oe(e)},replaceOwner:function(){var e=this;Ce(e)},registerMiner:function(){var e=this;Ve(e)},sendTransaction:function(){var e=this;Ue(e)},withdraw:function(){var e=this;je(e)},revoke:function(){var e=this;Ie(e)},todate:function(e){return _e(e)}}};function ye(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(a){return e.registerminer.start=a+200,t.eth.getBlock(a)}).then(function(t){var a=t.timestamp;e.now=a,e.wallet.TimeToStartUnlocking=a}),Pe(e)}function _e(e){var t=new Date(1e3*e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),o=t.getSeconds();return a+"-"+Te(n)+"-"+Te(r)+" "+Te(i)+":"+Te(l)+":"+Te(o)}function Te(e){return e<10&&(e="0"+e),e}function Oe(e){return Me.apply(this,arguments)}function Me(){return Me=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,l=t.wallet.Manager,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceManager(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceManager(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceManager=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),Me.apply(this,arguments)}function Ce(e){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,l=t.wallet.Owner,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceOwner(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceOwner(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceOwner=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),Ae.apply(this,arguments)}function Ve(e){return Re.apply(this,arguments)}function Re(){return Re=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=!1,e.prev=6,e.next=9,r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).call({from:i});case 9:l=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("Register Miner failed!please check params"),e.abrupt("return");case 18:o=r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).encodeABI(),s={from:i,to:a,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_registerminer=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[6,12]])})),Re.apply(this,arguments)}function Ue(e){return Se.apply(this,arguments)}function Se(){return Se=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.account,n=t.dialog_item.address,r=t.web3,i=t.walletlist.indexOf(t.dialog_item),new r.eth.Contract(window.Walletabi,n,{from:a}),e.next=7,r.eth.getBalance(a);case 7:if(l=e.sent,!(l<1e18*t.wallet.Value)){e.next=11;break}return alert("Insufficient Balance"),e.abrupt("return");case 11:o=1e18*t.wallet.Value,s={to:n,value:o.toString(16),from:a,gas:"0x186a0"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,l){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=l.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(l.result,function(e,t){window.txlist.push(t)})),r.eth.getBalance(n).then(function(e){t.walletlist[i].balance=e}),t.dialog_sendTransaction=!1;case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}},e)})),Se.apply(this,arguments)}function Ie(e){return We.apply(this,arguments)}function We(){return We=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=1e18*t.wallet.revoke,o=!1,e.prev=7,e.next=10,r.methods.revoke(l).call({from:i});case 10:o=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),console.log(e.t0);case 16:if(o){e.next=19;break}return alert("Revoke failed!"),e.abrupt("return",!1);case 19:s=r.methods.revoke(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_revoke=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[7,13]])})),We.apply(this,arguments)}function je(e){return Be.apply(this,arguments)}function Be(){return Be=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=1e18*t.wallet.withdraw,o=!1,e.prev=7,e.next=10,r.methods.withdraw(l).call({from:i});case 10:o=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](7);case 15:if(o){e.next=18;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 18:s=r.methods.withdraw(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[7,13]])})),Be.apply(this,arguments)}function $e(e){return Ee.apply(this,arguments)}function Ee(){return Ee=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.web3,n=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:t.account}),e.next=4,n.methods.create(t.wallet.Manager,t.wallet.Owner,t.wallet.TimeToStartUnlocking,t.wallet.TimeInterval,1e18*t.wallet.AmountOfEachUnlock,t.wallet.TimeToUnlockAll).call();case 4:if(r=e.sent,r){e.next=8;break}return alert("create wallet failed!please check params"),e.abrupt("return");case 8:i=n.methods.create(t.wallet.Manager,t.wallet.Owner,t.wallet.TimeToStartUnlocking,t.wallet.TimeInterval,1e18*t.wallet.AmountOfEachUnlock,t.wallet.TimeToUnlockAll).encodeABI(),l={from:t.account,to:n.options.address,value:"0x0",data:i,gas:"0xf42400"},ethereum.send({method:"eth_sendTransaction",params:[l],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)}),t.dialog=!1),t.dialog=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}},e)})),Ee.apply(this,arguments)}function Le(e,t,a){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(_["a"])(regeneratorRuntime.mark(function e(t,a,n){var r,i,l,o,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,o=t.walletlist[a]["address"],e.next=8,n.methods.owner().call();case 8:return t.walletlist[a]["owner"]=e.sent,e.next=11,n.methods.manager().call();case 11:return t.walletlist[a]["manager"]=e.sent,e.next=14,n.methods.amountOfEachUnlock().call();case 14:return t.walletlist[a]["amountOfEachUnlock"]=e.sent,e.next=17,n.methods.totalWithdrawals().call();case 17:return t.walletlist[a]["totalWithdrawals"]=e.sent,e.next=20,r.eth.getBalance(o);case 20:return t.walletlist[a]["balance"]=e.sent,e.next=23,n.methods.unlocked().call();case 23:return t.walletlist[a]["unlocked"]=e.sent,e.next=26,i.methods.isMinerOfHeight(l,o).call();case 26:if(s=e.sent,s){e.next=34;break}return e.next=30,i.methods.get(l+1e6,o).call();case 30:c=e.sent,0!=c[0]?t.walletlist[a]["miner"]+="已注册,("+c[0]+","+1e6*(Math.floor(c[0]/1e6)+1)+"]":t.walletlist[a]["miner"]="未挖矿",e.next=43;break;case 34:return t.walletlist[a]["miner"]="挖矿中",e.next=37,i.methods.get(l,o).call();case 37:return u=e.sent,t.walletlist[a]["miner"]+=":("+u[0]+","+1e6*(Math.floor(u[0]/1e6)+1)+"]",e.next=41,i.methods.get(l+1e6,o).call();case 41:c=e.sent,0!=c[0]&&(t.walletlist[a]["miner"]+=",("+c[0]+","+1e6*(Math.floor(c[0]/1e6)+1)+"]");case 43:case"end":return e.stop()}},e)})),Fe.apply(this,arguments)}function Pe(e){return He.apply(this,arguments)}function He(){return He=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c,u,d,m,w,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return a=t.account,n=t.web3,e.next=6,n.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择kaleido测试网络"),i=new n.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:a}),l=new n.eth.Contract(window.minerabi,window.mineraddress),e.next=12,n.eth.getBlockNumber();case 12:return o=e.sent,e.next=15,i.methods.getOwnedWallets(a).call();case 15:s=e.sent,t.walletlist=[],c=0;case 18:if(!(c<s.length)){e.next=77;break}return u=new n.eth.Contract(window.Walletabi,s[c],{from:a}),e.t0=t.walletlist,e.t1=s[c],e.next=24,u.methods.owner().call();case 24:return e.t2=e.sent,e.next=27,u.methods.manager().call();case 27:return e.t3=e.sent,e.next=30,u.methods.timeToStartUnlocking().call();case 30:return e.t4=e.sent,e.next=33,u.methods.timeInterval().call();case 33:return e.t5=e.sent,e.next=36,u.methods.timeToUnlockAll().call();case 36:return e.t6=e.sent,e.next=39,u.methods.amountOfEachUnlock().call();case 39:return e.t7=e.sent,e.next=42,u.methods.totalWithdrawals().call();case 42:return e.t8=e.sent,e.next=45,n.eth.getBalance(s[c]);case 45:return e.t9=e.sent,e.next=48,u.methods.unlocked().call();case 48:return e.t10=e.sent,e.t11={address:e.t1,owner:e.t2,manager:e.t3,miner:"",timeToStartUnlocking:e.t4,timeInterval:e.t5,timeToUnlockAll:e.t6,amountOfEachUnlock:e.t7,totalWithdrawals:e.t8,balance:e.t9,unlocked:e.t10},e.t0.push.call(e.t0,e.t11),d=u[c],e.next=54,l.methods.isMinerOfHeight(o,d).call();case 54:if(m=e.sent,m){e.next=62;break}return e.next=58,l.methods.get(o+1e6,d).call();case 58:w=e.sent,0!=w[0]?t.walletlist[c]["miner"]+="已注册,("+w[0]+","+1e6*(Math.floor(w[0]/1e6)+1)+"]":t.walletlist[c]["miner"]="未挖矿",e.next=71;break;case 62:return t.walletlist[c]["miner"]="挖矿中",e.next=65,l.methods.get(o,d).call();case 65:return p=e.sent,t.walletlist[c]["miner"]+=":("+p[0]+","+1e6*(Math.floor(p[0]/1e6)+1)+"]",e.next=69,l.methods.get(o+1e6,d).call();case 69:w=e.sent,0!=w[0]&&(t.walletlist[c]["miner"]+=",("+w[0]+","+1e6*(Math.floor(w[0]/1e6)+1)+"]");case 71:if(!t.viewmodel){e.next=73;break}return e.abrupt("continue",74);case 73:u.events.allEvents({},function(e,a){return function(n,r){Le(t,e,a)}}(c,u));case 74:c++,e.next=18;break;case 77:t.pagination.totalItems=s.length,Ne(t);case 79:case"end":return e.stop()}},e)})),He.apply(this,arguments)}function Ne(e){if(e.viewmodel)return!0;var t=e.web3,a=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});a.events.Instantiation({},function(){var n=Object(_["a"])(regeneratorRuntime.mark(function n(r,i){var l,o,s,c,u,d,m,w,p,f,v;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return l=e.walletlist.length,n.next=3,a.methods.getOwnedWallets(e.account).call();case 3:if(o=n.sent,s=o.length,l!=s){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,t.eth.getBlockNumber();case 9:c=n.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),d=l;case 12:if(!(d<o.length)){n.next=70;break}return console.log("newwalletevent",i,d),m=new t.eth.Contract(window.Walletabi,o[d]),n.t0=e.walletlist,n.t1=o[d],n.next=19,m.methods.owner().call();case 19:return n.t2=n.sent,n.next=22,m.methods.manager().call();case 22:return n.t3=n.sent,n.next=25,m.methods.timeToStartUnlocking().call();case 25:return n.t4=n.sent,n.next=28,m.methods.timeInterval().call();case 28:return n.t5=n.sent,n.next=31,m.methods.timeToUnlockAll().call();case 31:return n.t6=n.sent,n.next=34,m.methods.amountOfEachUnlock().call();case 34:return n.t7=n.sent,n.next=37,m.methods.totalWithdrawals().call();case 37:return n.t8=n.sent,n.next=40,t.eth.getBalance(o[d]);case 40:return n.t9=n.sent,n.next=43,m.methods.unlocked().call();case 43:return n.t10=n.sent,n.t11={address:n.t1,owner:n.t2,manager:n.t3,miner:"",timeToStartUnlocking:n.t4,timeInterval:n.t5,timeToUnlockAll:n.t6,amountOfEachUnlock:n.t7,totalWithdrawals:n.t8,balance:n.t9,unlocked:n.t10},n.t0.push.call(n.t0,n.t11),w=o[d],n.next=49,u.methods.isMinerOfHeight(c,w).call();case 49:if(p=n.sent,p){n.next=57;break}return n.next=53,u.methods.get(c+1e6,w).call();case 53:f=n.sent,0!=f[0]?e.walletlist[d]["miner"]+="已注册,("+f[0]+","+1e6*(Math.floor(f[0]/1e6)+1)+"]":e.walletlist[d]["miner"]="未挖矿",n.next=66;break;case 57:return e.walletlist[d]["miner"]="挖矿中",n.next=60,u.methods.get(c,w).call();case 60:return v=n.sent,e.walletlist[d]["miner"]+=":("+v[0]+","+1e6*(Math.floor(v[0]/1e6)+1)+"]",n.next=64,u.methods.get(c+1e6,w).call();case 64:f=n.sent,0!=f[0]&&(e.walletlist[d]["miner"]+=",("+f[0]+","+1e6*(Math.floor(f[0]/1e6)+1)+"]");case 66:m.events.allEvents({},function(t,a){return function(n,r){Le(e,t,a)}}(d,m));case 67:d++,n.next=12;break;case 70:e.pagination.totalItems=o.length;case 71:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}function Ke(e){for(var t=window.location.search.substring(1),a=t.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(r[0]==e)return r[1]}return""}var De=ke,ze=(a("f5e0"),a("12b2")),Ye=a("169a"),Je=Object(c["a"])(De,ge,xe,!1,null,null,null),qe=Je.exports;d()(Je,{VBtn:R["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:ze["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Ye["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ae["a"],VSpacer:B["a"],VTextField:$["a"],VToolbar:E["a"],VToolbarTitle:L["b"]});var Ge={name:"Main",components:{Head:P,Content:qe,Foot:de},data:function(){return{}}},Qe=Ge,Xe=(a("a7f5"),Object(c["a"])(Qe,ve,he,!1,null,"37fec980",null)),Ze=Xe.exports;d()(Xe,{VApp:m["a"]});var et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Head"),a("Content"),a("Foot")],1)},tt=[],at=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[a("v-card",[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",[e._v("Wallets List")]),a("v-spacer")],1),a("v-card-text",{staticClass:"px-0"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))])]),a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"vertical-align":"inherit","max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.manager))]),a("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",outline:"",color:"info"},on:{click:function(a){e.dialog_replaceManager=!0,e.dialog_item=t.item}}},[e._v("\n                        修改\n                    ")])],1),a("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToUnlockAll))+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.balance/1e18)+"\n                      "),a("v-btn",{staticStyle:{height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",outline:"",color:"info"},on:{click:function(a){e.dialog_sendTransaction=!0,e.dialog_item=t.item}}},[e._v("\n                        转入\n                        ")])],1),a("td",{staticClass:"text-xs-center"},[e._v(e._s((1*t.item.balance+1*t.item.totalWithdrawals-1*t.item.unlocked)/1e18)+"\n                      "),a("v-btn",{staticStyle:{height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",outline:"",color:"error"},on:{click:function(a){e.dialog_revoke=!0,e.dialog_item=t.item,e.wallet.revoke=(1*t.item.balance+1*t.item.totalWithdrawals-1*t.item.unlocked)/1e18}}},[e._v("\n                        撤回\n                        ")])],1),a("td",{staticClass:"text-xs-center"},[e._v(e._s((t.item.unlocked-t.item.totalWithdrawals)/1e18)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                      "+e._s(t.item.totalWithdrawals/1e18)+"\n                    \n                    \n                    \n                  ")])]}}])}),a("div",{staticClass:"text-xs-right pt-2"},[a("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("New Wallet")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}}),a("v-text-field",{attrs:{label:"Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}}),a("v-text-field",{attrs:{label:"TimeToStartUnlocking (timestamp)"},model:{value:e.wallet.TimeToStartUnlocking,callback:function(t){e.$set(e.wallet,"TimeToStartUnlocking",t)},expression:"wallet.TimeToStartUnlocking"}}),a("v-text-field",{attrs:{label:"TimeInterval (secs)"},model:{value:e.wallet.TimeInterval,callback:function(t){e.$set(e.wallet,"TimeInterval",t)},expression:"wallet.TimeInterval"}}),a("v-text-field",{attrs:{label:"AmountOfEachUnlock (KAL)"},model:{value:e.wallet.AmountOfEachUnlock,callback:function(t){e.$set(e.wallet,"AmountOfEachUnlock",t)},expression:"wallet.AmountOfEachUnlock"}}),a("v-text-field",{attrs:{label:"TimeToUnlockAll (timestamp)"},model:{value:e.wallet.TimeToUnlockAll,callback:function(t){e.$set(e.wallet,"TimeToUnlockAll",t)},expression:"wallet.TimeToUnlockAll"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.creatWallet}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceManager,callback:function(t){e.dialog_replaceManager=t},expression:"dialog_replaceManager"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Replace Manager")]),a("v-card-text",[a("v-text-field",{attrs:{label:"New Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.replaceManager}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceManager=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceOwner,callback:function(t){e.dialog_replaceOwner=t},expression:"dialog_replaceOwner"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Replace Owner")]),a("v-card-text",[a("v-text-field",{attrs:{label:"New Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.replaceOwner}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceOwner=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_registerminer,callback:function(t){e.dialog_registerminer=t},expression:"dialog_registerminer"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Register Miner")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Start Block"},model:{value:e.registerminer.start,callback:function(t){e.$set(e.registerminer,"start",t)},expression:"registerminer.start"}}),a("v-text-field",{attrs:{label:"Lifespan"},model:{value:e.registerminer.lifespan,callback:function(t){e.$set(e.registerminer,"lifespan",t)},expression:"registerminer.lifespan"}}),a("v-text-field",{attrs:{label:"vrf Verifier"},model:{value:e.registerminer.vrfVerifier,callback:function(t){e.$set(e.registerminer,"vrfVerifier",t)},expression:"registerminer.vrfVerifier"}}),a("v-text-field",{attrs:{label:"vote Verifier"},model:{value:e.registerminer.voteVerifier,callback:function(t){e.$set(e.registerminer,"voteVerifier",t)},expression:"registerminer.voteVerifier"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.registerMiner}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_registerminer=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_sendTransaction,callback:function(t){e.dialog_sendTransaction=t},expression:"dialog_sendTransaction"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Send Transaction")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.Value,callback:function(t){e.$set(e.wallet,"Value",t)},expression:"wallet.Value"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.sendTransaction}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_sendTransaction=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_withdraw,callback:function(t){e.dialog_withdraw=t},expression:"dialog_withdraw"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Withdraw")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.withdraw,callback:function(t){e.$set(e.wallet,"withdraw",t)},expression:"wallet.withdraw"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.withdraw}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_withdraw=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_revoke,callback:function(t){e.dialog_revoke=t},expression:"dialog_revoke"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Revoke")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.revoke,callback:function(t){e.$set(e.wallet,"revoke",t)},expression:"wallet.revoke"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.revoke}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_revoke=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},nt=[],rt=[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",sortable:!1,align:"center"},{text:"Manager",value:"manager",sortable:!1},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1,align:"center"},{text:"UnlockAll",value:"timeToUnlockAll",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1,align:"center"},{text:"待解锁 (KAL)",value:"balance",sortable:!1,align:"center"},{text:"待提取 (KAL)",value:"unlocked",sortable:!1,align:"center"},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1,align:"center"}],it={name:"Content",components:{},data:function(){return{account:"",web3:null,viewmodel:!1,dialog:!1,dialog_replaceManager:!1,dialog_replaceOwner:!1,dialog_registerminer:!1,dialog_sendTransaction:!1,dialog_withdraw:!1,dialog_revoke:!1,dialog_item:null,now:0,timer:null,headers:rt,walletlist:[],wallet:{Manager:"",Owner:"",TimeToStartUnlocking:1,TimeInterval:1,AmountOfEachUnlock:1,TimeToUnlockAll:"",Value:1},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:0,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=At("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),lt(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var a=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(a),e.account=ethereum.selectedAddress.toLowerCase(),lt(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),lt(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;kt(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceManager:function(){var e=this;ct(e)},replaceOwner:function(){var e=this;dt(e)},registerMiner:function(){var e=this;wt(e)},sendTransaction:function(){var e=this;ft(e)},withdraw:function(){var e=this;xt(e)},revoke:function(){var e=this;ht(e)},todate:function(e){return ot(e)}}};function lt(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(e){return t.eth.getBlock(e)}).then(function(t){var a=t.timestamp;e.now=a,e.wallet.TimeToStartUnlocking=a}),Ot(e)}function ot(e){var t=new Date(1e3*e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),o=t.getSeconds();return a+"-"+st(n)+"-"+st(r)+" "+st(i)+":"+st(l)+":"+st(o)}function st(e){return e<10&&(e="0"+e),e}function ct(e){return ut.apply(this,arguments)}function ut(){return ut=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,l=t.wallet.Manager,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceManager(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceManager(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceManager=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),ut.apply(this,arguments)}function dt(e){return mt.apply(this,arguments)}function mt(){return mt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,l=t.wallet.Owner,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceOwner(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceOwner(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceOwner=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),mt.apply(this,arguments)}function wt(e){return pt.apply(this,arguments)}function pt(){return pt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=!1,e.prev=6,e.next=9,r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).call({from:i});case 9:l=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("Register Miner failed!please check params"),e.abrupt("return");case 18:o=r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).encodeABI(),s={from:i,to:a,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_registerminer=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[6,12]])})),pt.apply(this,arguments)}function ft(e){return vt.apply(this,arguments)}function vt(){return vt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.account,n=t.dialog_item.address,r=t.web3,i=t.walletlist.indexOf(t.dialog_item),new r.eth.Contract(window.Walletabi,n,{from:a}),e.next=7,r.eth.getBalance(a);case 7:if(l=e.sent,!(l<1e18*t.wallet.Value)){e.next=11;break}return alert("Insufficient Balance"),e.abrupt("return");case 11:o=1e18*t.wallet.Value,s={to:n,value:o.toString(16),from:a,gas:"0x186a0"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,l){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=l.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(l.result,function(e,t){window.txlist.push(t)})),r.eth.getBalance(n).then(function(e){t.walletlist[i].balance=e}),t.dialog_sendTransaction=!1;case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}},e)})),vt.apply(this,arguments)}function ht(e){return gt.apply(this,arguments)}function gt(){return gt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=1e18*t.wallet.revoke,o=!1,e.prev=7,e.next=10,r.methods.revoke(l).call({from:i});case 10:o=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),console.log(e.t0);case 16:if(o){e.next=19;break}return alert("Revoke failed!"),e.abrupt("return",!1);case 19:s=r.methods.revoke(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_revoke=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[7,13]])})),gt.apply(this,arguments)}function xt(e){return bt.apply(this,arguments)}function bt(){return bt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=1e18*t.wallet.withdraw,o=!1,e.prev=7,e.next=10,r.methods.withdraw(l).call({from:i});case 10:o=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](7);case 15:if(o){e.next=18;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 18:s=r.methods.withdraw(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[7,13]])})),bt.apply(this,arguments)}function kt(e){return yt.apply(this,arguments)}function yt(){return yt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.web3,n=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:t.account}),e.next=4,n.methods.create(t.wallet.Manager,t.wallet.Owner,t.wallet.TimeToStartUnlocking,t.wallet.TimeInterval,1e18*t.wallet.AmountOfEachUnlock,t.wallet.TimeToUnlockAll).call();case 4:if(r=e.sent,r){e.next=8;break}return alert("create wallet failed!please check params"),e.abrupt("return");case 8:i=n.methods.create(t.wallet.Manager,t.wallet.Owner,t.wallet.TimeToStartUnlocking,t.wallet.TimeInterval,1e18*t.wallet.AmountOfEachUnlock,t.wallet.TimeToUnlockAll).encodeABI(),l={from:t.account,to:n.options.address,value:"0x0",data:i,gas:"0xf42400"},ethereum.send({method:"eth_sendTransaction",params:[l],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}},e)})),yt.apply(this,arguments)}function _t(e,t,a){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(_["a"])(regeneratorRuntime.mark(function e(t,a,n){var r,i,l,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,o=t.walletlist[a]["address"],e.next=8,n.methods.owner().call();case 8:return t.walletlist[a]["owner"]=e.sent,e.next=11,n.methods.manager().call();case 11:return t.walletlist[a]["manager"]=e.sent,e.next=14,i.methods.isMinerOfHeight(l,o).call();case 14:return t.walletlist[a]["miner"]=e.sent,e.next=17,n.methods.amountOfEachUnlock().call();case 17:return t.walletlist[a]["amountOfEachUnlock"]=e.sent,e.next=20,n.methods.totalWithdrawals().call();case 20:return t.walletlist[a]["totalWithdrawals"]=e.sent,e.next=23,r.eth.getBalance(o);case 23:return t.walletlist[a]["balance"]=e.sent,e.next=26,n.methods.unlocked().call();case 26:t.walletlist[a]["unlocked"]=e.sent;case 27:case"end":return e.stop()}},e)})),Tt.apply(this,arguments)}function Ot(e){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return a=t.account,n=t.web3,e.next=6,n.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择kaleido测试网络"),i=new n.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:a}),l=new n.eth.Contract(window.minerabi,window.mineraddress),e.next=12,n.eth.getBlockNumber();case 12:return o=e.sent,e.next=15,i.methods.getManagedWallets(a).call();case 15:s=e.sent,t.walletlist=[],c=0;case 18:if(!(c<s.length)){e.next=60;break}return u=new n.eth.Contract(window.Walletabi,s[c],{from:a}),e.t0=t.walletlist,e.t1=s[c],e.next=24,u.methods.owner().call();case 24:return e.t2=e.sent,e.next=27,u.methods.manager().call();case 27:return e.t3=e.sent,e.next=30,l.methods.isMinerOfHeight(o,s[c]).call();case 30:return e.t4=e.sent,e.next=33,u.methods.timeToStartUnlocking().call();case 33:return e.t5=e.sent,e.next=36,u.methods.timeInterval().call();case 36:return e.t6=e.sent,e.next=39,u.methods.timeToUnlockAll().call();case 39:return e.t7=e.sent,e.next=42,u.methods.amountOfEachUnlock().call();case 42:return e.t8=e.sent,e.next=45,u.methods.totalWithdrawals().call();case 45:return e.t9=e.sent,e.next=48,n.eth.getBalance(s[c]);case 48:return e.t10=e.sent,e.next=51,u.methods.unlocked().call();case 51:if(e.t11=e.sent,e.t12={address:e.t1,owner:e.t2,manager:e.t3,miner:e.t4,timeToStartUnlocking:e.t5,timeInterval:e.t6,timeToUnlockAll:e.t7,amountOfEachUnlock:e.t8,totalWithdrawals:e.t9,balance:e.t10,unlocked:e.t11},e.t0.push.call(e.t0,e.t12),!t.viewmodel){e.next=56;break}return e.abrupt("continue",57);case 56:u.events.allEvents({},function(e,a){return function(n,r){_t(t,e,a)}}(c,u));case 57:c++,e.next=18;break;case 60:t.pagination.totalItems=s.length,Ct(t);case 62:case"end":return e.stop()}},e)})),Mt.apply(this,arguments)}function Ct(e){if(e.viewmodel)return!0;var t=e.web3,a=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});a.events.Instantiation({},function(){var n=Object(_["a"])(regeneratorRuntime.mark(function n(r,i){var l,o,s,c,u,d,m;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return l=e.walletlist.length,n.next=3,a.methods.getManagedWallets(e.account).call();case 3:if(o=n.sent,s=o.length,l!=s){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,t.eth.getBlockNumber();case 9:c=n.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),d=l;case 12:if(!(d<o.length)){n.next=52;break}return m=new t.eth.Contract(window.Walletabi,o[d]),n.t0=e.walletlist,n.t1=o[d],n.next=18,m.methods.owner().call();case 18:return n.t2=n.sent,n.next=21,m.methods.manager().call();case 21:return n.t3=n.sent,n.next=24,u.methods.isMinerOfHeight(c,o[d]).call();case 24:return n.t4=n.sent,n.next=27,m.methods.timeToStartUnlocking().call();case 27:return n.t5=n.sent,n.next=30,m.methods.timeInterval().call();case 30:return n.t6=n.sent,n.next=33,m.methods.timeToUnlockAll().call();case 33:return n.t7=n.sent,n.next=36,m.methods.amountOfEachUnlock().call();case 36:return n.t8=n.sent,n.next=39,m.methods.totalWithdrawals().call();case 39:return n.t9=n.sent,n.next=42,t.eth.getBalance(o[d]);case 42:return n.t10=n.sent,n.next=45,m.methods.unlocked().call();case 45:n.t11=n.sent,n.t12={address:n.t1,owner:n.t2,manager:n.t3,miner:n.t4,timeToStartUnlocking:n.t5,timeInterval:n.t6,timeToUnlockAll:n.t7,amountOfEachUnlock:n.t8,totalWithdrawals:n.t9,balance:n.t10,unlocked:n.t11},n.t0.push.call(n.t0,n.t12),m.events.allEvents({},function(t,a){return h("style"),function(n,r){_t(e,t,a)}}(d,m));case 49:d++,n.next=12;break;case 52:e.pagination.totalItems=o.length;case 53:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}function At(e){for(var t=window.location.search.substring(1),a=t.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(r[0]==e)return r[1]}return""}var Vt=it,Rt=(a("2686"),Object(c["a"])(Vt,at,nt,!1,null,null,null)),Ut=Rt.exports;d()(Rt,{VBtn:R["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:ze["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Ye["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ae["a"],VSpacer:B["a"],VTextField:$["a"],VToolbar:E["a"],VToolbarTitle:L["b"]});var St={name:"Main",components:{Head:P,Content:Ut,Foot:de},data:function(){return{}}},It=St,Wt=Object(c["a"])(It,et,tt,!1,null,null,null),jt=Wt.exports;d()(Wt,{VApp:m["a"]});var Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("Head"),a("Content"),a("Foot")],1)},$t=[],Et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-content",[a("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[a("v-card",[a("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[a("v-toolbar-title",[e._v("Wallets List")]),a("v-spacer"),a("v-btn",{staticClass:"mb-2",attrs:{disabled:e.viewmodel,round:"",color:"primaty",outline:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Wallets")])],1),a("v-card-text",{staticClass:"px-0"},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))])]),a("td",{staticClass:"text-xs-center"},[a("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s("0x0000000000000000000000000000000000000000"==t.item.manager?"":t.item.manager))])]),a("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToUnlockAll))+"\n                  ")]),a("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.balance/1e18)+"\n                      "),a("v-btn",{staticStyle:{height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",outline:"",color:"info"},on:{click:function(a){e.dialog_sendTransaction=!0,e.dialog_item=t.item}}},[e._v("\n                        转入\n                      ")])],1),a("td",{staticClass:"text-xs-center"},[e._v(e._s((1*t.item.balance+1*t.item.totalWithdrawals-1*t.item.unlocked)/1e18)+"\n                      ")]),a("td",{staticClass:"text-xs-center"},[e._v(e._s((t.item.unlocked-t.item.totalWithdrawals)/1e18)+"\n                    ")]),a("td",{staticClass:"text-xs-center"},[e._v("\n                      "+e._s((t.item.unlocked-t.item.totalWithdrawals)/1e18)+"\n                  ")])]}}])}),a("div",{staticClass:"text-xs-right pt-2"},[a("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("New Wallet")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}}),a("v-text-field",{attrs:{label:"Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}}),a("v-text-field",{attrs:{label:"TimeToStartUnlocking (timestamp)"},model:{value:e.wallet.TimeToStartUnlocking,callback:function(t){e.$set(e.wallet,"TimeToStartUnlocking",t)},expression:"wallet.TimeToStartUnlocking"}}),a("v-text-field",{attrs:{label:"TimeInterval (secs)"},model:{value:e.wallet.TimeInterval,callback:function(t){e.$set(e.wallet,"TimeInterval",t)},expression:"wallet.TimeInterval"}}),a("v-text-field",{attrs:{label:"AmountOfEachUnlock (KAL)"},model:{value:e.wallet.AmountOfEachUnlock,callback:function(t){e.$set(e.wallet,"AmountOfEachUnlock",t)},expression:"wallet.AmountOfEachUnlock"}}),a("v-text-field",{attrs:{label:"TimeToUnlockAll (timestamp)"},model:{value:e.wallet.TimeToUnlockAll,callback:function(t){e.$set(e.wallet,"TimeToUnlockAll",t)},expression:"wallet.TimeToUnlockAll"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.creatWallet}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceManager,callback:function(t){e.dialog_replaceManager=t},expression:"dialog_replaceManager"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Replace Manager")]),a("v-card-text",[a("v-text-field",{attrs:{label:"New Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.replaceManager}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceManager=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceOwner,callback:function(t){e.dialog_replaceOwner=t},expression:"dialog_replaceOwner"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Replace Owner")]),a("v-card-text",[a("v-text-field",{attrs:{label:"New Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.replaceOwner}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceOwner=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_registerminer,callback:function(t){e.dialog_registerminer=t},expression:"dialog_registerminer"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Register Miner")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Start Block"},model:{value:e.registerminer.start,callback:function(t){e.$set(e.registerminer,"start",t)},expression:"registerminer.start"}}),a("v-text-field",{attrs:{label:"Lifespan"},model:{value:e.registerminer.lifespan,callback:function(t){e.$set(e.registerminer,"lifespan",t)},expression:"registerminer.lifespan"}}),a("v-text-field",{attrs:{label:"vrf Verifier"},model:{value:e.registerminer.vrfVerifier,callback:function(t){e.$set(e.registerminer,"vrfVerifier",t)},expression:"registerminer.vrfVerifier"}}),a("v-text-field",{attrs:{label:"vote Verifier"},model:{value:e.registerminer.voteVerifier,callback:function(t){e.$set(e.registerminer,"voteVerifier",t)},expression:"registerminer.voteVerifier"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.registerMiner}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_registerminer=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_sendTransaction,callback:function(t){e.dialog_sendTransaction=t},expression:"dialog_sendTransaction"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Send Transaction")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.Value,callback:function(t){e.$set(e.wallet,"Value",t)},expression:"wallet.Value"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.sendTransaction}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_sendTransaction=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_withdraw,callback:function(t){e.dialog_withdraw=t},expression:"dialog_withdraw"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Withdraw")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.withdraw,callback:function(t){e.$set(e.wallet,"withdraw",t)},expression:"wallet.withdraw"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.withdraw}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_withdraw=!1}}},[e._v("Cancel")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_revoke,callback:function(t){e.dialog_revoke=t},expression:"dialog_revoke"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[e._v("Revoke")]),a("v-card-text",[a("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.revoke,callback:function(t){e.$set(e.wallet,"revoke",t)},expression:"wallet.revoke"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"info"},on:{click:e.revoke}},[e._v("Send")]),a("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_revoke=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},Lt=[],Ft=[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",sortable:!1,align:"center"},{text:"Manager",value:"manager",sortable:!1,align:"center"},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1},{text:"UnlockAll",value:"timeToUnlockAll",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1},{text:"待解锁 (KAL)",value:"balance",sortable:!1},{text:"待提取 (KAL)",value:"unlocked",sortable:!1},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1}],Pt={name:"Content",components:{},data:function(){return{account:"",dialog:!1,viewmodel:!1,dialog_replaceManager:!1,dialog_replaceOwner:!1,dialog_registerminer:!1,dialog_sendTransaction:!1,dialog_withdraw:!1,dialog_revoke:!1,dialog_item:null,now:0,timer:null,headers:Ft,walletlist:[],wallet:{Manager:"",Owner:"",TimeToStartUnlocking:1,TimeInterval:1,AmountOfEachUnlock:1,TimeToUnlockAll:"",Value:1},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:0,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=da("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),Ht(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var a=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(a),e.account=ethereum.selectedAddress.toLowerCase(),Ht(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),Ht(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;ra(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceManager:function(){var e=this;zt(e)},replaceOwner:function(){var e=this;Jt(e)},registerMiner:function(){var e=this;Gt(e)},sendTransaction:function(){var e=this;Xt(e)},withdraw:function(){var e=this;aa(e)},revoke:function(){var e=this;ea(e)},todate:function(e){return Nt(e)}}};function Ht(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(e){return t.eth.getBlock(e)}).then(function(t){var a=t.timestamp;e.now=a,e.wallet.TimeToStartUnlocking=Nt(a),Kt(e.wallet.TimeToStartUnlocking),e.wallet.TimeToUnlockAll=e.wallet.TimeToStartUnlocking}),sa(e)}function Nt(e){var t=new Date(1e3*e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),o=t.getSeconds();return a+"-"+Dt(n)+"-"+Dt(r)+" "+Dt(i)+":"+Dt(l)+":"+Dt(o)}function Kt(e){var t=new Date(e),a=t.getTime();return a/1e3}function Dt(e){return e<10&&(e="0"+e),e}function zt(e){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,l=t.wallet.Manager,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceManager(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceManager(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceManager=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),Yt.apply(this,arguments)}function Jt(e){return qt.apply(this,arguments)}function qt(){return qt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,l=t.wallet.Owner,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceOwner(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceOwner(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceOwner=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),qt.apply(this,arguments)}function Gt(e){return Qt.apply(this,arguments)}function Qt(){return Qt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=!1,e.prev=6,e.next=9,r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).call({from:i});case 9:l=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("Register Miner failed!please check params"),e.abrupt("return");case 18:o=r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).encodeABI(),s={from:i,to:a,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_registerminer=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[6,12]])})),Qt.apply(this,arguments)}function Xt(e){return Zt.apply(this,arguments)}function Zt(){return Zt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.account,n=t.dialog_item.address,r=t.web3,i=t.walletlist.indexOf(t.dialog_item),new r.eth.Contract(window.Walletabi,n,{from:a}),e.next=7,r.eth.getBalance(a);case 7:if(l=e.sent,!(l<1e18*t.wallet.Value)){e.next=11;break}return alert("Insufficient Balance"),e.abrupt("return");case 11:o=1e18*t.wallet.Value,s={to:n,value:o.toString(16),from:a,gas:"0x186a0"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,l){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=l.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(l.result,function(e,t){window.txlist.push(t)})),r.eth.getBalance(n).then(function(e){t.walletlist[i].balance=e}),t.dialog_sendTransaction=!1;case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}},e)})),Zt.apply(this,arguments)}function ea(e){return ta.apply(this,arguments)}function ta(){return ta=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=1e18*t.wallet.revoke,o=!1,e.prev=7,e.next=10,r.methods.revoke(l).call({from:i});case 10:o=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),console.log(e.t0);case 16:if(o){e.next=19;break}return alert("Revoke failed!"),e.abrupt("return",!1);case 19:s=r.methods.revoke(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)}),t.dialog_revoke=!1),t.dialog_revoke=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[7,13]])})),ta.apply(this,arguments)}function aa(e){return na.apply(this,arguments)}function na(){return na=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dialog_item.address,n=t.web3,r=new n.eth.Contract(window.Walletabi,a,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=1e18*t.wallet.withdraw,o=!1,e.prev=7,e.next=10,r.methods.withdraw(l).call({from:i});case 10:o=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](7);case 15:if(o){e.next=18;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 18:s=r.methods.withdraw(l).encodeABI(),c={from:i,to:a,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[7,13]])})),na.apply(this,arguments)}function ra(e){return ia.apply(this,arguments)}function ia(){return ia=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.web3,n=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:t.account}),r=Kt(t.wallet.TimeToStartUnlocking),i=Kt(t.wallet.TimeToUnlockAll),l=!1,e.prev=5,e.next=8,n.methods.create(t.wallet.Manager,t.wallet.Owner,r,t.wallet.TimeInterval,1e18*t.wallet.AmountOfEachUnlock,i).call();case 8:l=e.sent,e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](5);case 13:if(l){e.next=16;break}return alert("create wallet failed!please check params"),e.abrupt("return");case 16:o=n.methods.create(t.wallet.Manager,t.wallet.Owner,r,t.wallet.TimeInterval,1e18*t.wallet.AmountOfEachUnlock,i).encodeABI(),s={from:t.account,to:n.options.address,value:"0x0",data:o,gas:"0xf42400"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(a,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=n.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(n.result,function(e,t){window.txlist.push(t)}),t.dialog=!1),t.dialog=!1;case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 19:case"end":return e.stop()}},e,null,[[5,11]])})),ia.apply(this,arguments)}function la(e,t,a){return oa.apply(this,arguments)}function oa(){return oa=Object(_["a"])(regeneratorRuntime.mark(function e(t,a,n){var r,i,l,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,o=t.walletlist[a]["address"],e.next=8,n.methods.owner().call();case 8:return t.walletlist[a]["owner"]=e.sent,e.next=11,n.methods.manager().call();case 11:return t.walletlist[a]["manager"]=e.sent,e.next=14,i.methods.isMinerOfHeight(l,o).call();case 14:return t.walletlist[a]["miner"]=e.sent,e.next=17,n.methods.amountOfEachUnlock().call();case 17:return t.walletlist[a]["amountOfEachUnlock"]=e.sent,e.next=20,n.methods.totalWithdrawals().call();case 20:return t.walletlist[a]["totalWithdrawals"]=e.sent,e.next=23,r.eth.getBalance(o);case 23:return t.walletlist[a]["balance"]=e.sent,e.next=26,n.methods.unlocked().call();case 26:t.walletlist[a]["unlocked"]=e.sent;case 27:case"end":return e.stop()}},e)})),oa.apply(this,arguments)}function sa(e){return ca.apply(this,arguments)}function ca(){return ca=Object(_["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,l,o,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return a=t.account,n=t.web3,e.next=6,n.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择kaleido测试网络"),i=new n.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:a}),l=new n.eth.Contract(window.minerabi,window.mineraddress),e.next=12,n.eth.getBlockNumber();case 12:return o=e.sent,e.next=15,i.methods.getCreatedWallets(a).call();case 15:s=e.sent,t.walletlist=[],c=0;case 18:if(!(c<s.length)){e.next=60;break}return u=new n.eth.Contract(window.Walletabi,s[c],{from:a}),e.t0=t.walletlist,e.t1=s[c],e.next=24,u.methods.owner().call();case 24:return e.t2=e.sent,e.next=27,u.methods.manager().call();case 27:return e.t3=e.sent,e.next=30,l.methods.isMinerOfHeight(o,s[c]).call();case 30:return e.t4=e.sent,e.next=33,u.methods.timeToStartUnlocking().call();case 33:return e.t5=e.sent,e.next=36,u.methods.timeInterval().call();case 36:return e.t6=e.sent,e.next=39,u.methods.timeToUnlockAll().call();case 39:return e.t7=e.sent,e.next=42,u.methods.amountOfEachUnlock().call();case 42:return e.t8=e.sent,e.next=45,u.methods.totalWithdrawals().call();case 45:return e.t9=e.sent,e.next=48,n.eth.getBalance(s[c]);case 48:return e.t10=e.sent,e.next=51,u.methods.unlocked().call();case 51:if(e.t11=e.sent,e.t12={address:e.t1,owner:e.t2,manager:e.t3,miner:e.t4,timeToStartUnlocking:e.t5,timeInterval:e.t6,timeToUnlockAll:e.t7,amountOfEachUnlock:e.t8,totalWithdrawals:e.t9,balance:e.t10,unlocked:e.t11},e.t0.push.call(e.t0,e.t12),!t.viewmodel){e.next=56;break}return e.abrupt("continue",57);case 56:u.events.allEvents({},function(e,a){return function(n,r){la(t,e,a)}}(c,u));case 57:c++,e.next=18;break;case 60:t.pagination.totalItems=s.length,ua(t);case 62:case"end":return e.stop()}},e)})),ca.apply(this,arguments)}function ua(e){if(e.viewmodel)return!0;var t=e.web3,a=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});a.events.Instantiation({},function(){var n=Object(_["a"])(regeneratorRuntime.mark(function n(r,i){var l,o,s,c,u,d,m;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return l=e.walletlist.length,n.next=3,a.methods.getCreatedWallets(e.account).call();case 3:if(o=n.sent,s=o.length,l!=s){n.next=7;break}return n.abrupt("return");case 7:return n.next=9,t.eth.getBlockNumber();case 9:c=n.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),d=l;case 12:if(!(d<o.length)){n.next=52;break}return m=new t.eth.Contract(window.Walletabi,o[d]),n.t0=e.walletlist,n.t1=o[d],n.next=18,m.methods.owner().call();case 18:return n.t2=n.sent,n.next=21,m.methods.manager().call();case 21:return n.t3=n.sent,n.next=24,u.methods.isMinerOfHeight(c,o[d]).call();case 24:return n.t4=n.sent,n.next=27,m.methods.timeToStartUnlocking().call();case 27:return n.t5=n.sent,n.next=30,m.methods.timeInterval().call();case 30:return n.t6=n.sent,n.next=33,m.methods.timeToUnlockAll().call();case 33:return n.t7=n.sent,n.next=36,m.methods.amountOfEachUnlock().call();case 36:return n.t8=n.sent,n.next=39,m.methods.totalWithdrawals().call();case 39:return n.t9=n.sent,n.next=42,t.eth.getBalance(o[d]);case 42:return n.t10=n.sent,n.next=45,m.methods.unlocked().call();case 45:n.t11=n.sent,n.t12={address:n.t1,owner:n.t2,manager:n.t3,miner:n.t4,timeToStartUnlocking:n.t5,timeInterval:n.t6,timeToUnlockAll:n.t7,amountOfEachUnlock:n.t8,totalWithdrawals:n.t9,balance:n.t10,unlocked:n.t11},n.t0.push.call(n.t0,n.t12),m.events.allEvents({},function(t,a){return function(n,r){la(e,t,a)}}(d,m));case 49:d++,n.next=12;break;case 52:e.pagination.totalItems=o.length;case 53:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}function da(e){for(var t=window.location.search.substring(1),a=t.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(r[0]==e)return r[1]}return""}var ma=Pt,wa=(a("df14"),Object(c["a"])(ma,Et,Lt,!1,null,null,null)),pa=wa.exports;d()(wa,{VBtn:R["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:ze["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Ye["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ae["a"],VSpacer:B["a"],VTextField:$["a"],VToolbar:E["a"],VToolbarTitle:L["b"]});var fa={name:"Main",components:{Head:P,Content:pa,Foot:de},data:function(){return{}}},va=fa,ha=Object(c["a"])(va,Bt,$t,!1,null,null,null),ga=ha.exports;d()(ha,{VApp:m["a"]}),n["a"].use(g["a"]);var xa=new g["a"]({routes:[{path:"/",name:"owner",component:Ze},{path:"/creator",name:"creator",component:ga},{path:"/manager",name:"manager",component:jt},{path:"/transactions",name:"Transactions",component:fe}]});window.Web=v.a,window.FactoryAddress="0x3192fdaff2c85404a27b6b98390a027e2174bdfa",window.Factoryabi=[{constant:!0,inputs:[{name:"creator",type:"address"}],name:"getCreatedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"getOwnedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfCreator",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"creator",type:"address"}],name:"getCreatedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"getOwnedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfManager",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"},{name:"_newOwner",type:"address"}],name:"replaceOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{payable:!1,stateMutability:"nonpayable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!1,name:"sender",type:"address"},{indexed:!1,name:"dapp",type:"address"}],name:"Instantiation",type:"event"},{constant:!1,inputs:[{name:"_manager",type:"address"},{name:"_owner",type:"address"},{name:"s",type:"uint64"},{name:"i",type:"uint64"},{name:"n",type:"uint64"},{name:"e",type:"uint64"}],name:"create",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_manager",type:"address"},{name:"_newManager",type:"address"}],name:"replaceManager",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_manager",type:"address"}],name:"getManagedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_manager",type:"address"}],name:"getManagedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"}],window.Walletabi=[{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"withdraw",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"manager",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalWithdrawals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"unlocked",outputs:[{name:"ret",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timeToUnlockAll",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timeToStartUnlocking",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timeInterval",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"replaceOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"amountOfEachUnlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"factory",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"start",type:"uint64"},{name:"lifespan",type:"uint32"},{name:"vrfVerifier",type:"bytes32"},{name:"voteVerifier",type:"bytes32"}],name:"registerMiner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_owner",type:"address"},{name:"_manager",type:"address"},{name:"s",type:"uint64"},{name:"i",type:"uint64"},{name:"n",type:"uint64"},{name:"e",type:"uint64"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!1,name:"_manager",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Revocation",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"sender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"owner",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Withdrew",type:"event"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"revoke",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newManager",type:"address"}],name:"replaceManager",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],window.minerabi=[{anonymous:!1,inputs:[{indexed:!1,name:"start",type:"uint256"},{indexed:!1,name:"miner",type:"address"}],name:"Added",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"start",type:"uint256"},{indexed:!1,name:"miner",type:"address"}],name:"Updated",type:"event"},{constant:!1,inputs:[{name:"start",type:"uint64"},{name:"lifespan",type:"uint32"},{name:"coinbase",type:"address"},{name:"vrfVerifier",type:"bytes32"},{name:"voteVerifier",type:"bytes32"}],name:"set",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"number",type:"uint256"},{name:"coinbase",type:"address"}],name:"setCoinbase",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"miner",type:"address"}],name:"get",outputs:[{name:"",type:"uint64"},{name:"",type:"uint32"},{name:"",type:"address"},{name:"",type:"bytes32"},{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"addr",type:"address"}],name:"isMinerOfHeight",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"}],name:"getNewAddedMinersCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"index",type:"uint32"}],name:"getNewAddedMiner",outputs:[{name:"miner",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],window.mineraddress="0x1000000000000000000000000000000000000002",window.host="http://localhost:8080/xbone",window.host="https://api.kalscan.io/testnet",window.networkid=889,n["a"].config.productionTip=!1,new n["a"]({el:"#app",router:xa,components:{App:p},render:function(e){return e(p)}})},6172:function(e,t,a){},"9fe2":function(e,t,a){},a7f5:function(e,t,a){"use strict";var n=a("9fe2"),r=a.n(n);r.a},c85e:function(e,t,a){},df14:function(e,t,a){"use strict";var n=a("6172"),r=a.n(n);r.a},e679:function(e,t,a){},f5e0:function(e,t,a){"use strict";var n=a("e679"),r=a.n(n);r.a}});
//# sourceMappingURL=index.952da8c1.js.map