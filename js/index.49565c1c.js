(function(e){function t(t){for(var a,l,s=t[0],o=t[1],c=t[2],d=0,m=[];d<s.length;d++)l=s[d],r[l]&&m.push(r[l][0]),r[l]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var o=n[s];0!==r[o]&&(a=!1)}a&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={index:0},i=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=o;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},"25d1":function(e,t,n){},2686:function(e,t,n){"use strict";var a=n("c85e"),r=n.n(a);r.a},3:function(e,t){},4:function(e,t){},"4e91":function(e,t,n){"use strict";var a=n("25d1"),r=n.n(a);r.a},"55d6":function(e,t,n){"use strict";var a=n("55fd"),r=n.n(a);r.a},"55fd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("14c6"),n("08c1"),n("4842"),n("d9fc");var a=n("2b0e"),r=n("bb71");n("da64");a["a"].use(r["a"],{iconfont:"md"});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("router-view")],1)},l=[],s={name:"App",components:{},data:function(){return{}}},o=s,c=n("2877"),u=n("6544"),d=n.n(u),m=n("7496"),p=Object(c["a"])(o,i,l,!1,null,null,null),w=p.exports;d()(p,{VApp:m["a"]});var f=n("6314"),v=n.n(f),g=n("8c4f"),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Head"),n("Content"),n("Foot")],1)},b=[],y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"Head"}},[n("v-toolbar",{attrs:{color:"blue darken-3",app:""}},[n("v-toolbar-items",[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{flat:"",dark:"",large:""}},a),[e._v("\n            "+e._s(e.path)+"\n            "),n("v-icon",{attrs:{dark:"",left:""}},[e._v("arrow_drop_down")])],1)]}}])},[n("v-list",[n("v-list-tile",[n("v-list-tile-title",[n("v-icon",{attrs:{dark:"",color:"red"}},[e._v("person_pin")]),n("a",{attrs:{href:"#/"}},[e._v(" 我的锁定钱包")])],1)],1),n("v-list-tile",[n("v-list-tile-title",[n("v-icon",{attrs:{dark:"",color:"red"}},[e._v("perm_contact_calendar")]),n("a",{attrs:{href:"#/creator"}},[e._v(" 创建锁定钱包")])],1)],1),n("v-list-tile",[n("v-list-tile-title",[n("v-icon",{attrs:{dark:"",color:"red"}},[e._v(" monetization_on")]),n("a",{attrs:{href:"#/manager"}},[e._v(" 管理锁定钱包")])],1)],1)],1)],1)],1),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",dark:"",large:"",href:"#/transactions"}},[e._v("\n        Transactions\n      ")])],1),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[e.isonline?n("span",{staticStyle:{color:"white"}},[n("br"),e._v("\n      \n         "+e._s(e.account)+"\n      ")]):e._e(),e.isonline?e._e():n("v-text-field",{staticStyle:{width:"380px"},attrs:{"single-line":"",outlined:"",dark:"",label:"address"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}}),e.isonline?e._e():n("v-btn",{attrs:{flat:"",icon:"",color:"white"},on:{click:e.search}},[n("v-icon",[e._v("search")])],1)],1),n("v-toolbar-items",{staticClass:"hidden-sm-and-down",staticStyle:{"min-width":"65px"}},[e.balance>0?n("span",{staticStyle:{color:"white",margin:"0 10px"}},[n("br"),e._v("\n        "+e._s((e.balance/1e18).toFixed(3))+" KAL\n      ")]):e._e()]),e.isonline?n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",icon:"",color:"#2de234"}},[n("i",{staticClass:"fas fa-circle"})])],1):e._e(),e.isonline?e._e():n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",icon:"",dark:""},on:{click:e.offline}},[n("i",{staticClass:"fas fa-plug"})])],1)],1)],1)},k=[],_=(n("96cf"),n("28a5"),n("3b8d")),C=(n("386d"),{name:"Head",data:function(){return{isonline:!1,loading:!1,balance:0,account:"",web3:null,path:""}},mounted:function(){var e=this;"/"==e.$route.path?e.path="我的锁定钱包":"/creator"==e.$route.path?e.path="创建锁定钱包":"/manager"==e.$route.path?e.path="管理锁定钱包":e.path="锁定钱包";var t=I("address");if(""!=t)return e.account=t.toLowerCase(),e.web3=new window.Web(new window.Web.providers.HttpProvider(window.host)),M(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var n=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(n),T(e))},1e3);return!1}T(e)}},methods:{offline:function(){"undefined"!==typeof window.ethereum?ethereum.enable().then(function(e){if("undefined"===typeof web3);else{var t=window.location.href,n=(window.location.search.substr(1),t.substr(0,t.indexOf("?")));window.location.href=n}}).catch(function(e){console.log(e)}):confirm("Download MetaMask?")&&window.open("https://metamask.io/")},getBalance:function(){var e=this;e.loading=!0;var t=e.web3;t.eth.getBalance(e.account).then(function(t){e.loading=!1,e.balance=t})},search:function(){window.location.href="?address="+this.account}}});function T(e){e.account=ethereum.selectedAddress;var t=e.web3;t.eth.getBalance(e.account).then(function(t){e.balance=t}),e.isonline=!0;setInterval(function(){ethereum.selectedAddress!==e.account&&e.$router.go(0),t.eth.getBalance(e.account).then(function(t){e.balance=t})},1e3)}function M(e){return O.apply(this,arguments)}function O(){return O=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.web3,n.eth.getBalance(t.account).then(function(e){t.balance=e});case 2:case"end":return e.stop()}},e)})),O.apply(this,arguments)}function I(e){for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}var V=C,S=(n("4e91"),n("8336")),W=n("132d"),R=n("8860"),A=n("ba95"),U=n("5d23"),B=n("e449"),j=n("9910"),F=n("2677"),P=n("71d9"),L=n("2a7f"),$=Object(c["a"])(V,y,k,!1,null,null,null),H=$.exports;d()($,{VBtn:S["a"],VIcon:W["a"],VList:R["a"],VListTile:A["a"],VListTileTitle:U["b"],VMenu:B["a"],VSpacer:j["a"],VTextField:F["a"],VToolbar:P["a"],VToolbarItems:L["a"]});var N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[n("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md10:"",xl8:""}},[n("v-card",[n("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[n("v-toolbar-title",[e._v("Transactions  ")]),n("v-spacer"),n("v-btn",{staticClass:"mb-2",attrs:{round:"",color:"error",outline:""},on:{click:e.RemoveAll}},[e._v("Remove All")])],1),n("v-card-text",{staticClass:"px-0"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.txlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-start"},[n("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                      "+e._s(t.item.hash)+"\n                      ")])]),n("td",{staticClass:"text-xs-start"},[n("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.from)+"\n                    ")])]),n("td",{staticClass:"text-xs-start"},[n("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.to)+"\n                    ")])]),n("td",{staticClass:"text-xs-start"},[e._v(e._s(t.item.value/1e18))]),n("td",{staticClass:"text-xs-start"},[n("span",{staticStyle:{"max-width":"200px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.input)+"\n                    ")])]),n("td",{staticClass:"text-xs-start"},[e._v(e._s("0x1"==t.item.status?"success":"0x0"==t.item.status?"failed":"pending"))]),n("td",{staticClass:"text-xs-start"},[n("v-icon",{on:{click:function(n){return e.deleteTx(t.item)}}},[e._v("delete")])],1)]}}])}),n("div",{staticClass:"text-xs-right pt-2"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1)],1)},D=[],E=[{text:"Hash",value:"hash",align:"left",sortable:!1},{text:"From",value:"from",align:"left",sortable:!1},{text:"To",value:"to",sortable:!1},{text:"Value (KAL)",value:"value",sortable:!1},{text:"Data",value:"input",sortable:!1},{text:"Status",value:"status",sortable:!1},{text:"Remove",value:"remove",sortable:!1}],K={name:"Content",components:{},data:function(){return{dialog:!1,headers:E,transaction:{to:"",value:"",input:""},txlist:[],pagination:{rowsPerPage:5,totalItems:11}}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.txlist.length/this.pagination.rowsPerPage)}},mounted:function(){var e=this;if(null!=window.txlist){for(var t=0;t<window.txlist.length;t++)null==window.txlist[t]["status"]&&(window.txlist[t]["status"]="pending");e.txlist=window.txlist}z(e)},methods:{deleteTx:function(e){var t=this.txlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&(this.txlist.splice(t,1),window.txlist=this.txlist),this.pagination.totalItems=this.txlist.length},RemoveAll:function(){confirm("Are you sure you want to delete all item?")&&(this.txlist=[],window.txlist=[],this.pagination.totalItems=this.txlist.length)},sendTransaction:function(){}}};function z(e){if("undefined"!=typeof window.ethereum)for(var t=0;t<e.txlist.length;t++)Y(e,t)}function Y(e,t){if("undefined"!=typeof window.ethereum){e.txlist[t]["blockNubmer"];var n=e.txlist[t]["hash"];web3.eth.getTransactionReceipt(n,function(n,a){null!=a&&(e.txlist[t]["blockNumber"]=a["blockNumber"],e.txlist[t]["status"]=a["status"])})}}var J=K,q=(n("55d6"),n("b0af")),G=n("99d9"),Q=n("a523"),X=n("549c"),Z=n("8fea"),ee=n("0e8f"),te=n("a722"),ne=n("891e"),ae=Object(c["a"])(J,N,D,!1,null,null,null),re=ae.exports;d()(ae,{VBtn:S["a"],VCard:q["a"],VCardText:G["b"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VFlex:ee["a"],VIcon:W["a"],VLayout:te["a"],VPagination:ne["a"],VSpacer:j["a"],VToolbar:P["a"],VToolbarTitle:L["b"]});var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"Foot"}},[n("v-footer",{attrs:{dark:"",color:"blue darken-3",height:"auto"}},[n("v-spacer"),n("v-flex",{attrs:{calss:"white--text"}},[e._v("\n      ©2019 — "),n("strong",[e._v("kaleidochain")])])],1)],1)},le=[],se={name:"Foot"},oe=se,ce=n("553a"),ue=Object(c["a"])(oe,ie,le,!1,null,null,null),de=ue.exports;d()(ue,{VFlex:ee["a"],VFooter:ce["a"],VSpacer:j["a"]});var me={name:"Transactions",components:{Head:H,Content:re,Foot:de},data:function(){return{}}},pe=me,we=Object(c["a"])(pe,x,b,!1,null,null,null),fe=we.exports;d()(we,{VApp:m["a"]});var he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Head"),n("Content"),n("Foot")],1)},ve=[],ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[n("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[n("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[n("v-card",[n("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[n("v-toolbar-title",[e._v("Wallets List")]),n("v-spacer")],1),n("v-card-text",{staticClass:"px-0"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))]),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",outline:"",color:"info"},on:{click:function(n){e.dialog_replaceOwner=!0,e.dialog_item=t.item}}},[e._v("\n                        编辑\n                    ")])],1),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.miner)+"\n\n                      "),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,outline:"",small:"",flat:"",color:"info"},on:{click:function(n){e.dialog_registerminer=!0,e.dialog_item=t.item}}},[e._v("\n                        注册\n                    ")])],1),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                    * \n                    "+e._s(t.item.numInterval)+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.web3.utils.fromWei(t.item.balance))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.web3.utils.fromWei(t.item.unlock))+"\n\n                    "),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",color:"info",outline:""},on:{click:function(n){e.dialog_withdraw=!0,e.dialog_item=t.item,e.wallet.withdraw=e.web3.utils.fromWei(t.item.unlock)}}},[e._v("提取")])],1),n("td",{staticClass:"text-xs-center"},[e._v("\n                      "+e._s(e.web3.utils.fromWei(t.item.totalWithdrawals))+"\n                  ")])]}}])}),n("div",{staticClass:"text-xs-right pt-2"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceOwner,callback:function(t){e.dialog_replaceOwner=t},expression:"dialog_replaceOwner"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Owner")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceOwner}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceOwner=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_registerminer,callback:function(t){e.dialog_registerminer=t},expression:"dialog_registerminer"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Register Miner")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Start Block"},model:{value:e.registerminer.start,callback:function(t){e.$set(e.registerminer,"start",t)},expression:"registerminer.start"}}),n("v-text-field",{attrs:{label:"Lifespan"},model:{value:e.registerminer.lifespan,callback:function(t){e.$set(e.registerminer,"lifespan",t)},expression:"registerminer.lifespan"}}),n("v-text-field",{attrs:{label:"vrf Verifier"},model:{value:e.registerminer.vrfVerifier,callback:function(t){e.$set(e.registerminer,"vrfVerifier",t)},expression:"registerminer.vrfVerifier"}}),n("v-text-field",{attrs:{label:"vote Verifier"},model:{value:e.registerminer.voteVerifier,callback:function(t){e.$set(e.registerminer,"voteVerifier",t)},expression:"registerminer.voteVerifier"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.registerMiner}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_registerminer=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_withdraw,callback:function(t){e.dialog_withdraw=t},expression:"dialog_withdraw"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Withdraw")]),n("v-card-text",[e._v("\n        全部提取: "+e._s(e.wallet.withdraw)+" KAL\n      ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.withdraw}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_withdraw=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},xe=[],be=[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",align:"center",sortable:!1},{text:"Miner",value:"miner",sortable:!1,align:"center"},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1,align:"center"},{text:"待提取 (KAL)",value:"unlocked",sortable:!1,align:"center"},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1,align:"center"}],ye={name:"Content",components:{},data:function(){return{account:"",web3:null,viewmodel:!1,dialog:!1,dialog_replaceOwner:!1,dialog_registerminer:!1,dialog_withdraw:!1,dialog_item:null,timer:null,now:0,headers:be,walletlist:[],wallet:{Manager:"",Owner:"",TimeToStartUnlocking:1,TimeInterval:1,AmountOfEachUnlock:1,TimeToUnlockAll:"",Value:1},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:100,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=je("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),ke(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var n=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(n),e.account=ethereum.selectedAddress.toLowerCase(),ke(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),ke(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;_creatWallet(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceOwner:function(){var e=this;Te(e)},registerMiner:function(){var e=this;Oe(e)},withdraw:function(){var e=this;Ve(e)},todate:function(e){return _e(e)}}};function ke(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(n){return e.registerminer.start=n+200,t.eth.getBlock(n)}).then(function(t){var n=t.timestamp;e.now=n,e.wallet.TimeToStartUnlocking=n}),Ae(e)}function _e(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),s=t.getSeconds();return n+"-"+Ce(a)+"-"+Ce(r)+" "+Ce(i)+":"+Ce(l)+":"+Ce(s)}function Ce(e){return e<10&&(e="0"+e),e}function Te(e){return Me.apply(this,arguments)}function Me(){return Me=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Owner,t.walletlist.indexOf(t.dialog_item),s=0;try{s=r.methods.replaceOwner(l).call({from:i})}catch(u){}if(s){e.next=11;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 11:o=r.methods.replaceOwner(l).encodeABI(),c={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceOwner=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}},e)})),Me.apply(this,arguments)}function Oe(e){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=!1,e.prev=6,e.next=9,r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).call({from:i});case 9:l=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("Register Miner failed!please check params"),e.abrupt("return");case 18:s=r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).encodeABI(),o={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[o],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_registerminer=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[6,12]])})),Ie.apply(this,arguments)}function Ve(e){return Se.apply(this,arguments)}function Se(){return Se=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=0,e.prev=5,e.next=8,r.methods.unlock().call({from:i});case 8:l=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](5),console.log(e.t0);case 14:if(0!=l){e.next=17;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 17:s=r.methods.unlock().encodeABI(),o={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[o],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 20:case"end":return e.stop()}},e,null,[[5,11]])})),Se.apply(this,arguments)}function We(e,t,n){return Re.apply(this,arguments)}function Re(){return Re=Object(_["a"])(regeneratorRuntime.mark(function e(t,n,a){var r,i,l,s,o,c,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,s=t.walletlist[n]["address"],e.next=8,a.methods.owner().call();case 8:return t.walletlist[n]["owner"]=e.sent,e.next=11,a.methods.manager().call();case 11:return t.walletlist[n]["manager"]=e.sent,e.next=14,a.methods.creator().call();case 14:return o=e.sent,t.walletlist[n]["creator"]=o,e.next=18,i.methods.isMinerOfHeight(1e6*(Math.floor(l/1e6)+1)-10,s).call();case 18:return t.walletlist[n]["miner"]=e.sent,e.next=21,a.methods.timeInterval().call();case 21:return t.walletlist[n]["timeInterval"]=e.sent,e.next=24,a.methods.totalWithdrawals().call();case 24:return t.walletlist[n]["totalWithdrawals"]=e.sent,e.next=27,r.eth.getBalance(s);case 27:return t.walletlist[n]["balance"]=e.sent,e.next=30,a.methods.unlock().call({from:o});case 30:return t.walletlist[n]["unlock"]=e.sent,e.next=33,a.methods.lastUnlockTime().call();case 33:return t.walletlist[n]["lastUnlockTime"]=e.sent,t.walletlist[n]["miner"]="",e.next=37,i.methods.isMinerOfHeight(1e6*(Math.floor(l/1e6)+1)-10,s).call();case 37:if(c=e.sent,c){e.next=45;break}return e.next=41,i.methods.get(l+1e6,s).call();case 41:u=e.sent,0!=u[0]?t.walletlist[n]["miner"]+="已注册,("+u[0]+","+1e6*(Math.floor(u[0]/1e6)+1)+"]":t.walletlist[n]["miner"]="未挖矿",e.next=54;break;case 45:return t.walletlist[n]["miner"]="挖矿中",e.next=48,i.methods.get(l,s).call();case 48:return d=e.sent,t.walletlist[n]["miner"]+=":("+d[0]+","+1e6*(Math.floor(d[0]/1e6)+1)+"]",e.next=52,i.methods.get(l+1e6,s).call();case 52:u=e.sent,0!=u[0]&&(t.walletlist[n]["miner"]+=",("+u[0]+","+1e6*(Math.floor(u[0]/1e6)+1)+"]");case 54:case"end":return e.stop()}},e)})),Re.apply(this,arguments)}function Ae(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c,u,d,m,p,w,f,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return n=t.account,a=t.web3,e.next=6,a.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择Kaleidochain网络"),i=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:n}),l=new a.eth.Contract(window.minerabi,window.mineraddress),e.next=12,a.eth.getBlockNumber();case 12:return s=e.sent,e.next=15,i.methods.getOwnedWallets(n).call();case 15:o=e.sent,t.walletlist=[],c=0;case 18:if(!(c<o.length)){e.next=88;break}return u=new a.eth.Contract(window.Walletabi,o[c],{from:n}),e.next=22,u.methods.creator().call();case 22:return d=e.sent,e.next=25,u.methods.lastUnlockTime().call();case 25:return m=e.sent,e.t0=t.walletlist,e.t1=o[c],e.next=30,u.methods.owner().call();case 30:return e.t2=e.sent,e.next=33,u.methods.manager().call();case 33:return e.t3=e.sent,e.t4=d,e.next=37,l.methods.isMinerOfHeight(s,o[c]).call();case 37:return e.t5=e.sent,e.next=40,u.methods.timeToStartUnlocking().call();case 40:return e.t6=e.sent,e.next=43,u.methods.timeInterval().call();case 43:return e.t7=e.sent,e.next=46,u.methods.totalWithdrawals().call();case 46:return e.t8=e.sent,e.next=49,a.eth.getBalance(o[c]);case 49:return e.t9=e.sent,e.next=52,u.methods.unlock().call({from:d});case 52:return e.t10=e.sent,e.t11=m,e.next=56,u.methods.numInterval().call();case 56:return e.t12=e.sent,e.next=59,u.methods.timeToInterval(m).call();case 59:return e.t13=e.sent,e.t14={address:e.t1,owner:e.t2,manager:e.t3,creator:e.t4,miner:e.t5,timeToStartUnlocking:e.t6,timeInterval:e.t7,totalWithdrawals:e.t8,balance:e.t9,unlock:e.t10,lastUnlockTime:e.t11,numInterval:e.t12,unlockedTime:e.t13},e.t0.push.call(e.t0,e.t14),p=o[c],e.next=65,l.methods.isMinerOfHeight(1e6*(Math.floor(s/1e6)+1)-10,p).call();case 65:if(w=e.sent,w){e.next=73;break}return e.next=69,l.methods.get(s+1e6,p).call();case 69:f=e.sent,0!=f[0]?t.walletlist[c]["miner"]+="已注册,("+f[0]+","+1e6*(Math.floor(f[0]/1e6)+1)+"]":t.walletlist[c]["miner"]="未挖矿",e.next=82;break;case 73:return t.walletlist[c]["miner"]="挖矿中",e.next=76,l.methods.get(s,p).call();case 76:return h=e.sent,t.walletlist[c]["miner"]+=":("+h[0]+","+1e6*(Math.floor(h[0]/1e6)+1)+"]",e.next=80,l.methods.get(s+1e6,p).call();case 80:f=e.sent,0!=f[0]&&(t.walletlist[c]["miner"]+=",("+f[0]+","+1e6*(Math.floor(f[0]/1e6)+1)+"]");case 82:if(!t.viewmodel){e.next=84;break}return e.abrupt("continue",85);case 84:u.events.allEvents({},function(e,n){return function(a,r){We(t,e,n)}}(c,u));case 85:c++,e.next=18;break;case 88:t.pagination.totalItems=o.length,Be(t);case 90:case"end":return e.stop()}},e)})),Ue.apply(this,arguments)}function Be(e){if(e.viewmodel)return!0;var t=e.web3,n=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});n.events.Instantiation({},function(){var a=Object(_["a"])(regeneratorRuntime.mark(function a(r,i){var l,s,o,c,u,d,m,p,w,f,h,v,g;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return l=e.walletlist.length,a.next=3,n.methods.getOwnedWallets(e.account).call();case 3:if(s=a.sent,o=s.length,l!=o){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,t.eth.getBlockNumber();case 9:c=a.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),d=l;case 12:if(!(d<s.length)){a.next=80;break}return m=new t.eth.Contract(window.Walletabi,s[d]),a.next=16,m.methods.creator().call();case 16:return p=a.sent,a.next=19,m.methods.lastUnlockTime().call();case 19:return w=a.sent,a.t0=e.walletlist,a.t1=s[d],a.next=24,m.methods.owner().call();case 24:return a.t2=a.sent,a.next=27,m.methods.manager().call();case 27:return a.t3=a.sent,a.t4=p,a.next=31,u.methods.isMinerOfHeight(c,s[d]).call();case 31:return a.t5=a.sent,a.next=34,m.methods.timeToStartUnlocking().call();case 34:return a.t6=a.sent,a.next=37,m.methods.timeInterval().call();case 37:return a.t7=a.sent,a.next=40,m.methods.totalWithdrawals().call();case 40:return a.t8=a.sent,a.next=43,t.eth.getBalance(s[d]);case 43:return a.t9=a.sent,a.next=46,m.methods.unlock().call({from:p});case 46:return a.t10=a.sent,a.t11=w,a.next=50,m.methods.numInterval().call();case 50:return a.t12=a.sent,a.next=53,m.methods.lastUnlockTime().call();case 53:return a.t13=a.sent,a.t14={address:a.t1,owner:a.t2,manager:a.t3,creator:a.t4,miner:a.t5,timeToStartUnlocking:a.t6,timeInterval:a.t7,totalWithdrawals:a.t8,balance:a.t9,unlock:a.t10,lastUnlockTime:a.t11,numInterval:a.t12,unlockedTime:a.t13},a.t0.push.call(a.t0,a.t14),f=s[d],a.next=59,u.methods.isMinerOfHeight(1e6*(Math.floor(c/1e6)+1)-10,f).call();case 59:if(h=a.sent,h){a.next=67;break}return a.next=63,u.methods.get(c+1e6,f).call();case 63:v=a.sent,0!=v[0]?e.walletlist[d]["miner"]+="已注册,("+v[0]+","+1e6*(Math.floor(v[0]/1e6)+1)+"]":e.walletlist[d]["miner"]="未挖矿",a.next=76;break;case 67:return e.walletlist[d]["miner"]="挖矿中",a.next=70,u.methods.get(c,f).call();case 70:return g=a.sent,e.walletlist[d]["miner"]+=":("+g[0]+","+1e6*(Math.floor(g[0]/1e6)+1)+"]",a.next=74,u.methods.get(c+1e6,f).call();case 74:v=a.sent,0!=v[0]&&(e.walletlist[d]["miner"]+=",("+v[0]+","+1e6*(Math.floor(v[0]/1e6)+1)+"]");case 76:m.events.allEvents({},function(t,n){return function(a,r){We(e,t,n)}}(d,m));case 77:d++,a.next=12;break;case 80:e.pagination.totalItems=s.length;case 81:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}function je(e){for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}var Fe=ye,Pe=(n("f5e0"),n("12b2")),Le=n("169a"),$e=Object(c["a"])(Fe,ge,xe,!1,null,null,null),He=$e.exports;d()($e,{VBtn:S["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:Pe["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Le["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ne["a"],VSpacer:j["a"],VTextField:F["a"],VToolbar:P["a"],VToolbarTitle:L["b"]});var Ne={name:"Main",components:{Head:H,Content:He,Foot:de},data:function(){return{}}},De=Ne,Ee=(n("a7f5"),Object(c["a"])(De,he,ve,!1,null,"37fec980",null)),Ke=Ee.exports;d()(Ee,{VApp:m["a"]});var ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Head"),n("Content"),n("Foot")],1)},Ye=[],Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[n("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[n("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[n("v-card",[n("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[n("v-toolbar-title",[e._v("Wallets List")]),n("v-spacer")],1),n("v-card-text",{staticClass:"px-0"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"inherit","max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.manager))]),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",outline:"",color:"info"},on:{click:function(n){e.dialog_replaceManager=!0,e.dialog_item=t.item}}},[e._v("\n                        修改\n                    ")])],1),n("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                    * \n                    "+e._s(t.item.numInterval)+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.web3.utils.fromWei(t.item.balance))+"\n                    "),n("v-btn",{staticStyle:{height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",outline:"",color:"error"},on:{click:function(n){e.dialog_revoke=!0,e.dialog_item=t.item,e.wallet.revoke=e.web3.utils.fromWei(e.web3.utils.toBN(t.item.balance))}}},[e._v("\n                        撤回\n                        ")])],1),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(t.item.unlock))+"\n                    ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                      "+e._s(e.web3.utils.fromWei(t.item.totalWithdrawals))+"\n                    \n                    \n                    \n                  ")])]}}])}),n("div",{staticClass:"text-xs-right pt-2"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceManager,callback:function(t){e.dialog_replaceManager=t},expression:"dialog_replaceManager"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Manager")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceManager}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceManager=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_revoke,callback:function(t){e.dialog_revoke=t},expression:"dialog_revoke"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Revoke")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.revoke,callback:function(t){e.$set(e.wallet,"revoke",t)},expression:"wallet.revoke"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.revoke}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_revoke=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},qe=[],Ge=(n("6b54"),[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",sortable:!1,align:"center"},{text:"Manager",value:"manager",sortable:!1,align:"center"},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1},{text:"待提取 (KAL)",value:"unlocked",sortable:!1,align:"center"},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1,align:"center"}]),Qe={name:"Content",components:{},data:function(){return{account:"",web3:null,viewmodel:!1,dialog:!1,dialog_replaceManager:!1,dialog_replaceOwner:!1,dialog_registerminer:!1,dialog_sendTransaction:!1,dialog_withdraw:!1,dialog_revoke:!1,dialog_item:null,now:0,timer:null,headers:Ge,walletlist:[],wallet:{Manager:"",Owner:"",TimeToStartUnlocking:1,TimeInterval:1,AmountOfEachUnlock:1,TimeToUnlockAll:"",Value:1},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:0,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=gt("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),Xe(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var n=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(n),e.account=ethereum.selectedAddress.toLowerCase(),Xe(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),Xe(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;_creatWallet(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceManager:function(){var e=this;tt(e)},replaceOwner:function(){var e=this;at(e)},registerMiner:function(){var e=this;it(e)},sendTransaction:function(){var e=this;st(e)},withdraw:function(){var e=this;dt(e)},revoke:function(){var e=this;ct(e)},todate:function(e){return Ze(e)}}};function Xe(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(e){return t.eth.getBlock(e)}).then(function(t){var n=t.timestamp;e.now=n,e.wallet.TimeToStartUnlocking=n}),ft(e)}function Ze(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),s=t.getSeconds();return n+"-"+et(a)+"-"+et(r)+" "+et(i)+":"+et(l)+":"+et(s)}function et(e){return e<10&&(e="0"+e),e}function tt(e){return nt.apply(this,arguments)}function nt(){return nt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Manager,t.walletlist.indexOf(t.dialog_item),s=!1;try{s=r.methods.replaceManager(l).call({from:i})}catch(u){}if(s){e.next=11;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 11:o=r.methods.replaceManager(l).encodeABI(),c={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceManager=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}},e)})),nt.apply(this,arguments)}function at(e){return rt.apply(this,arguments)}function rt(){return rt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Owner,t.walletlist.indexOf(t.dialog_item),s=r.methods.replaceOwner(l).call({from:i}),s){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:o=r.methods.replaceOwner(l).encodeABI(),c={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceOwner=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),rt.apply(this,arguments)}function it(e){return lt.apply(this,arguments)}function lt(){return lt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=!1,e.prev=6,e.next=9,r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).call({from:i});case 9:l=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("Register Miner failed!please check params"),e.abrupt("return");case 18:s=r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).encodeABI(),o={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[o],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_registerminer=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[6,12]])})),lt.apply(this,arguments)}function st(e){return ot.apply(this,arguments)}function ot(){return ot=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.account,a=t.dialog_item.address,r=t.web3,i=t.walletlist.indexOf(t.dialog_item),new r.eth.Contract(window.Walletabi,a,{from:n}),e.next=7,r.eth.getBalance(n);case 7:if(l=e.sent,!r.utils.toBN(l).lt(r.utils.toBN(r.utils.toWei(t.wallet.Value.toString())))){e.next=11;break}return alert("Insufficient Balance"),e.abrupt("return");case 11:s=r.utils.toWei(t.wallet.Value),s=r.utils.toBN(s).toString(16),o={to:a,value:s,from:n,gas:"0x186a0"},ethereum.send({method:"eth_sendTransaction",params:[o],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,l){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=l.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(l.result,function(e,t){window.txlist.push(t)})),r.eth.getBalance(a).then(function(e){t.walletlist[i].balance=e}),t.dialog_sendTransaction=!1;case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}},e)})),ot.apply(this,arguments)}function ct(e){return ut.apply(this,arguments)}function ut(){return ut=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=a.utils.toWei(t.wallet.revoke.toString(10)),s=!1,e.prev=7,e.next=10,r.methods.revoke(l).call({from:i});case 10:s=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),console.log(e.t0);case 16:if(s){e.next=19;break}return alert("Revoke failed!"),e.abrupt("return",!1);case 19:o=r.methods.revoke(l).encodeABI(),c={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_revoke=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[7,13]])})),ut.apply(this,arguments)}function dt(e){return mt.apply(this,arguments)}function mt(){return mt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=a.utils.toWei(t.wallet.withdraw.toString(10)),s=!1,e.prev=7,e.next=10,r.methods.withdraw(l).call({from:i});case 10:s=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](7);case 15:if(s){e.next=18;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 18:o=r.methods.withdraw(l).encodeABI(),c={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[7,13]])})),mt.apply(this,arguments)}function pt(e,t,n){return wt.apply(this,arguments)}function wt(){return wt=Object(_["a"])(regeneratorRuntime.mark(function e(t,n,a){var r,i,l,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,s=t.walletlist[n]["address"],e.next=8,a.methods.owner().call();case 8:return t.walletlist[n]["owner"]=e.sent,e.next=11,a.methods.manager().call();case 11:return t.walletlist[n]["manager"]=e.sent,e.next=14,a.methods.creator().call();case 14:return o=e.sent,t.walletlist[n]["creator"]=o,e.next=18,i.methods.isMinerOfHeight(1e6*(Math.floor(l/1e6)+1)-10,s).call();case 18:return t.walletlist[n]["miner"]=e.sent,e.next=21,a.methods.timeInterval().call();case 21:return t.walletlist[n]["timeInterval"]=e.sent,e.next=24,a.methods.totalWithdrawals().call();case 24:return t.walletlist[n]["totalWithdrawals"]=e.sent,e.next=27,r.eth.getBalance(s);case 27:return t.walletlist[n]["balance"]=e.sent,e.next=30,a.methods.unlock().call({from:o});case 30:return t.walletlist[n]["unlock"]=e.sent,e.next=33,a.methods.lastUnlockTime().call();case 33:return t.walletlist[n]["lastUnlockTime"]=e.sent,e.next=36,a.methods.timeToInterval(t.walletlist[n]["lastUnlockTime"]).call();case 36:t.walletlist[n]["unlockedTime"]=e.sent;case 37:case"end":return e.stop()}},e)})),wt.apply(this,arguments)}function ft(e){return ht.apply(this,arguments)}function ht(){return ht=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c,u,d,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return n=t.account,a=t.web3,e.next=6,a.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择Kaleidochain网络"),i=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:n}),l=new a.eth.Contract(window.minerabi,window.mineraddress),e.next=12,a.eth.getBlockNumber();case 12:return s=e.sent,e.next=15,i.methods.getManagedWallets(n).call();case 15:o=e.sent,t.walletlist=[],c=0;case 18:if(!(c<o.length)){e.next=68;break}return u=new a.eth.Contract(window.Walletabi,o[c],{from:n}),e.next=22,u.methods.creator().call();case 22:return d=e.sent,e.next=25,u.methods.lastUnlockTime().call();case 25:return m=e.sent,e.t0=t.walletlist,e.t1=o[c],e.next=30,u.methods.owner().call();case 30:return e.t2=e.sent,e.next=33,u.methods.manager().call();case 33:return e.t3=e.sent,e.t4=d,e.next=37,l.methods.isMinerOfHeight(s,o[c]).call();case 37:return e.t5=e.sent,e.next=40,u.methods.timeToStartUnlocking().call();case 40:return e.t6=e.sent,e.next=43,u.methods.timeInterval().call();case 43:return e.t7=e.sent,e.next=46,u.methods.totalWithdrawals().call();case 46:return e.t8=e.sent,e.next=49,a.eth.getBalance(o[c]);case 49:return e.t9=e.sent,e.next=52,u.methods.unlock().call({from:d});case 52:return e.t10=e.sent,e.t11=m,e.next=56,u.methods.numInterval().call();case 56:return e.t12=e.sent,e.next=59,u.methods.timeToInterval(m).call();case 59:if(e.t13=e.sent,e.t14={address:e.t1,owner:e.t2,manager:e.t3,creator:e.t4,miner:e.t5,timeToStartUnlocking:e.t6,timeInterval:e.t7,totalWithdrawals:e.t8,balance:e.t9,unlock:e.t10,lastUnlockTime:e.t11,numInterval:e.t12,unlockedTime:e.t13},e.t0.push.call(e.t0,e.t14),!t.viewmodel){e.next=64;break}return e.abrupt("continue",65);case 64:u.events.allEvents({},function(e,n){return function(a,r){pt(t,e,n)}}(c,u));case 65:c++,e.next=18;break;case 68:t.pagination.totalItems=o.length,vt(t);case 70:case"end":return e.stop()}},e)})),ht.apply(this,arguments)}function vt(e){if(e.viewmodel)return!0;var t=e.web3,n=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});n.events.Instantiation({},function(){var a=Object(_["a"])(regeneratorRuntime.mark(function a(r,i){var l,s,o,c,u,d,m,p,w;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return l=e.walletlist.length,a.next=3,n.methods.getManagedWallets(e.account).call();case 3:if(s=a.sent,o=s.length,l!=o){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,t.eth.getBlockNumber();case 9:c=a.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),d=l;case 12:if(!(d<s.length)){a.next=60;break}return m=new t.eth.Contract(window.Walletabi,s[d]),a.next=16,m.methods.creator().call();case 16:return p=a.sent,a.next=19,m.methods.lastUnlockTime().call();case 19:return w=a.sent,a.t0=e.walletlist,a.t1=s[d],a.next=24,m.methods.owner().call();case 24:return a.t2=a.sent,a.next=27,m.methods.manager().call();case 27:return a.t3=a.sent,a.t4=p,a.next=31,u.methods.isMinerOfHeight(c,s[d]).call();case 31:return a.t5=a.sent,a.next=34,m.methods.timeToStartUnlocking().call();case 34:return a.t6=a.sent,a.next=37,m.methods.timeInterval().call();case 37:return a.t7=a.sent,a.next=40,m.methods.totalWithdrawals().call();case 40:return a.t8=a.sent,a.next=43,t.eth.getBalance(s[d]);case 43:return a.t9=a.sent,a.next=46,m.methods.unlock().call({from:p});case 46:return a.t10=a.sent,a.t11=w,a.next=50,m.methods.numInterval().call();case 50:return a.t12=a.sent,a.next=53,m.methods.lastUnlockTime().call();case 53:a.t13=a.sent,a.t14={address:a.t1,owner:a.t2,manager:a.t3,creator:a.t4,miner:a.t5,timeToStartUnlocking:a.t6,timeInterval:a.t7,totalWithdrawals:a.t8,balance:a.t9,unlock:a.t10,lastUnlockTime:a.t11,numInterval:a.t12,unlockedTime:a.t13},a.t0.push.call(a.t0,a.t14),m.events.allEvents({},function(t,n){return h("style"),function(a,r){pt(e,t,n)}}(d,m));case 57:d++,a.next=12;break;case 60:e.pagination.totalItems=s.length;case 61:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}function gt(e){for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}var xt=Qe,bt=(n("2686"),Object(c["a"])(xt,Je,qe,!1,null,null,null)),yt=bt.exports;d()(bt,{VBtn:S["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:Pe["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Le["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ne["a"],VSpacer:j["a"],VTextField:F["a"],VToolbar:P["a"],VToolbarTitle:L["b"]});var kt={name:"Main",components:{Head:H,Content:yt,Foot:de},data:function(){return{}}},_t=kt,Ct=Object(c["a"])(_t,ze,Ye,!1,null,null,null),Tt=Ct.exports;d()(Ct,{VApp:m["a"]});var Mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Head"),n("Content"),n("Foot")],1)},Ot=[],It=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[n("v-card",[n("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[n("v-toolbar-title",[e._v("Wallets List")]),n("v-spacer"),n("v-btn",{staticClass:"mb-2",attrs:{disabled:e.viewmodel,round:"",color:"primaty",outline:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Wallets")])],1),n("v-card-text",{staticClass:"px-0"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s("0x0000000000000000000000000000000000000000"==t.item.manager?"":t.item.manager))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.creator))]),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px"},attrs:{small:"",outline:"",color:"info"},on:{click:function(n){e.dialog_replaceCreator=!0,e.dialog_item=t.item}}},[e._v("\n                        编辑\n                    ")])],1),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                    * \n                    "+e._s(t.item.numInterval)+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(t.item.balance))+"\n                      "),n("v-btn",{staticStyle:{height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",outline:"",color:"info"},on:{click:function(n){e.dialog_sendTransaction=!0,e.dialog_item=t.item}}},[e._v("\n                        转入\n                      ")])],1),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(t.item.unlock))+"\n                    "),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",color:"info",outline:""},on:{click:function(n){e.dialog_withdraw=!0,e.dialog_item=t.item,e.wallet.withdraw=e.web3.utils.fromWei(t.item.unlock)}}},[e._v("代提取")])],1),n("td",{staticClass:"text-xs-center"},[e._v("\n                      "+e._s(e.web3.utils.fromWei(t.item.totalWithdrawals))+"\n                  ")])]}}])}),n("div",{staticClass:"text-xs-right pt-2"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("New Wallet")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}}),n("v-text-field",{attrs:{label:"Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}}),n("v-text-field",{attrs:{label:"TimeToStartUnlocking (timestamp)"},model:{value:e.wallet.TimeToStartUnlocking,callback:function(t){e.$set(e.wallet,"TimeToStartUnlocking",t)},expression:"wallet.TimeToStartUnlocking"}}),n("v-text-field",{attrs:{label:"Interval (secs)"},model:{value:e.wallet.Interval,callback:function(t){e.$set(e.wallet,"Interval",t)},expression:"wallet.Interval"}}),n("v-text-field",{attrs:{label:"numInterval "},model:{value:e.wallet.numInterval,callback:function(t){e.$set(e.wallet,"numInterval",t)},expression:"wallet.numInterval"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.creatWallet}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceCreator,callback:function(t){e.dialog_replaceCreator=t},expression:"dialog_replaceCreator"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Creator")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Creator"},model:{value:e.wallet.Creator,callback:function(t){e.$set(e.wallet,"Creator",t)},expression:"wallet.Creator"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceCreator}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceCreator=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_sendTransaction,callback:function(t){e.dialog_sendTransaction=t},expression:"dialog_sendTransaction"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Send Transaction")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.Value,callback:function(t){e.$set(e.wallet,"Value",t)},expression:"wallet.Value"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.sendTransaction}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_sendTransaction=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_withdraw,callback:function(t){e.dialog_withdraw=t},expression:"dialog_withdraw"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Withdraw")]),n("v-card-text",[e._v("\n        全部提取: "+e._s(e.wallet.withdraw)+" KAL\n      ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.withdraw}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_withdraw=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},Vt=[],St=[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",sortable:!1,align:"center"},{text:"Manager",value:"manager",sortable:!1,align:"center"},{text:"Creator",value:"Creator",sortable:!1,align:"center"},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1},{text:"待提取 (KAL)",value:"unlocked",sortable:!1},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1,align:"center"}],Wt={name:"Content",components:{},data:function(){return{account:"",dialog:!1,viewmodel:!1,dialog_replaceCreator:!1,dialog_sendTransaction:!1,dialog_withdraw:!1,dialog_item:null,now:0,timer:null,headers:St,walletlist:[],wallet:{Manager:"",Owner:"",Creator:"0x0557D37D996B123FC1799B17b417A6e5D6773031",TimeToStartUnlocking:1,Interval:10,numInterval:10,Value:1,withdraw:0},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:0,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=qt("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),Rt(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var n=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(n),e.account=ethereum.selectedAddress.toLowerCase(),Rt(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),Rt(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;Nt(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceCreator:function(){var e=this;jt(e)},sendTransaction:function(){var e=this;Pt(e)},withdraw:function(){var e=this;$t(e)},todate:function(e){return At(e)}}};function Rt(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(e){return t.eth.getBlock(e)}).then(function(t){var n=t.timestamp;e.now=n,e.wallet.TimeToStartUnlocking=At(n),Ut(e.wallet.TimeToStartUnlocking),e.wallet.TimeToUnlockAll=e.wallet.TimeToStartUnlocking}),zt(e)}function At(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),s=t.getSeconds();return n+"-"+Bt(a)+"-"+Bt(r)+" "+Bt(i)+":"+Bt(l)+":"+Bt(s)}function Ut(e){var t=new Date(e),n=t.getTime();return n/1e3}function Bt(e){return e<10&&(e="0"+e),e}function jt(e){return Ft.apply(this,arguments)}function Ft(){return Ft=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Creator.toLowerCase(),s=!1;try{s=r.methods.replaceCreator(l).call({from:i})}catch(u){console.log(u)}if(s){e.next=10;break}return alert("Replace Creator failed!please check params"),e.abrupt("return");case 10:o=r.methods.replaceCreator(l).encodeABI(),c={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceCreator=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),Ft.apply(this,arguments)}function Pt(e){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.account,a=t.dialog_item.address,r=t.web3,i=t.walletlist.indexOf(t.dialog_item),new r.eth.Contract(window.Walletabi,a,{from:n}),e.next=7,r.eth.getBalance(n);case 7:if(l=e.sent,!r.utils.toBN(l).lt(r.utils.toBN(r.utils.toWei(t.wallet.Value.toString())))){e.next=11;break}return alert("Insufficient Balance"),e.abrupt("return");case 11:s=r.utils.toWei(t.wallet.Value.toString()),s=r.utils.toBN(s).toString(16),o={to:a,value:s,from:n,gas:"0x186a0"},ethereum.send({method:"eth_sendTransaction",params:[o],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,l){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=l.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(l.result,function(e,t){window.txlist.push(t)})),r.eth.getBalance(a).then(function(e){t.walletlist[i].balance=e}),t.dialog_sendTransaction=!1;case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}},e)})),Lt.apply(this,arguments)}function $t(e){return Ht.apply(this,arguments)}function Ht(){return Ht=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=0,e.prev=5,e.next=8,r.methods.unlock().call({from:i});case 8:l=e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](5),console.log(e.t0);case 14:if(0!=l){e.next=17;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 17:s=r.methods.unlock().encodeABI(),o={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[o],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 20:case"end":return e.stop()}},e,null,[[5,11]])})),Ht.apply(this,arguments)}function Nt(e){return Dt.apply(this,arguments)}function Dt(){return Dt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.web3,a=new n.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:t.account}),r=Ut(t.wallet.TimeToStartUnlocking),i=t.wallet.Interval,l=t.wallet.numInterval,s=!1,e.prev=6,e.next=9,a.methods.create(t.wallet.Owner,t.wallet.Manager,r,i,l);case 9:s=e.sent,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(a.options.address),console.log(e.t0);case 16:if(s){e.next=19;break}return alert("create wallet failed!please check params"),e.abrupt("return");case 19:o=a.methods.create(t.wallet.Owner,t.wallet.Manager,r,i,l).encodeABI(),c={from:t.account,to:a.options.address,value:"0x0",data:o,gas:"0xf42400"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)}),t.dialog=!1),t.dialog=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[6,12]])})),Dt.apply(this,arguments)}function Et(e,t,n){return Kt.apply(this,arguments)}function Kt(){return Kt=Object(_["a"])(regeneratorRuntime.mark(function e(t,n,a){var r,i,l,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,s=t.walletlist[n]["address"],e.next=8,a.methods.owner().call();case 8:return t.walletlist[n]["owner"]=e.sent,e.next=11,a.methods.manager().call();case 11:return t.walletlist[n]["manager"]=e.sent,e.next=14,a.methods.creator().call();case 14:return o=e.sent,t.walletlist[n]["creator"]=o,e.next=18,i.methods.isMinerOfHeight(1e6*(Math.floor(l/1e6)+1)-10,s).call();case 18:return t.walletlist[n]["miner"]=e.sent,e.next=21,a.methods.timeInterval().call();case 21:return t.walletlist[n]["timeInterval"]=e.sent,e.next=24,a.methods.totalWithdrawals().call();case 24:return t.walletlist[n]["totalWithdrawals"]=e.sent,e.next=27,r.eth.getBalance(s);case 27:return t.walletlist[n]["balance"]=e.sent,e.next=30,a.methods.unlock().call({from:o});case 30:return t.walletlist[n]["unlock"]=e.sent,e.next=33,a.methods.lastUnlockTime().call();case 33:return t.walletlist[n]["lastUnlockTime"]=e.sent,e.next=36,a.methods.timeToInterval(t.walletlist[n]["lastUnlockTime"]).call();case 36:t.walletlist[n]["unlockedTime"]=e.sent;case 37:case"end":return e.stop()}},e)})),Kt.apply(this,arguments)}function zt(e){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,s,o,c,u,d,m;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return n=t.account,a=t.web3,e.next=6,a.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择Kaleidochain网络"),i=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:n}),l=new a.eth.Contract(window.minerabi,window.mineraddress),e.next=12,a.eth.getBlockNumber();case 12:return s=e.sent,e.next=15,i.methods.getCreatedWallets(n).call();case 15:o=e.sent,t.walletlist=[],c=0;case 18:if(!(c<o.length)){e.next=68;break}return u=new a.eth.Contract(window.Walletabi,o[c],{from:n}),e.next=22,u.methods.creator().call();case 22:return d=e.sent,e.next=25,u.methods.lastUnlockTime().call();case 25:return m=e.sent,e.t0=t.walletlist,e.t1=o[c],e.next=30,u.methods.owner().call();case 30:return e.t2=e.sent,e.next=33,u.methods.manager().call();case 33:return e.t3=e.sent,e.t4=d,e.next=37,l.methods.isMinerOfHeight(s,o[c]).call();case 37:return e.t5=e.sent,e.next=40,u.methods.timeToStartUnlocking().call();case 40:return e.t6=e.sent,e.next=43,u.methods.timeInterval().call();case 43:return e.t7=e.sent,e.next=46,u.methods.totalWithdrawals().call();case 46:return e.t8=e.sent,e.next=49,a.eth.getBalance(o[c]);case 49:return e.t9=e.sent,e.next=52,u.methods.unlock().call({from:d});case 52:return e.t10=e.sent,e.t11=m,e.next=56,u.methods.numInterval().call();case 56:return e.t12=e.sent,e.next=59,u.methods.timeToInterval(m).call();case 59:if(e.t13=e.sent,e.t14={address:e.t1,owner:e.t2,manager:e.t3,creator:e.t4,miner:e.t5,timeToStartUnlocking:e.t6,timeInterval:e.t7,totalWithdrawals:e.t8,balance:e.t9,unlock:e.t10,lastUnlockTime:e.t11,numInterval:e.t12,unlockedTime:e.t13},e.t0.push.call(e.t0,e.t14),!t.viewmodel){e.next=64;break}return e.abrupt("continue",65);case 64:u.events.allEvents({},function(e,n){return function(a,r){Et(t,e,n)}}(c,u));case 65:c++,e.next=18;break;case 68:t.pagination.totalItems=o.length,Jt(t);case 70:case"end":return e.stop()}},e)})),Yt.apply(this,arguments)}function Jt(e){if(e.viewmodel)return!0;var t=e.web3,n=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});n.events.Instantiation({},function(){var a=Object(_["a"])(regeneratorRuntime.mark(function a(r,i){var l,s,o,c,u,d,m,p,w;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return l=e.walletlist.length,a.next=3,n.methods.getCreatedWallets(e.account).call();case 3:if(s=a.sent,o=s.length,l!=o){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,t.eth.getBlockNumber();case 9:c=a.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),console.log("_newWlletEvented"),d=l;case 13:if(!(d<s.length)){a.next=62;break}return console.log(d),m=new t.eth.Contract(window.Walletabi,s[d]),a.next=18,m.methods.creator().call();case 18:return p=a.sent,a.next=21,m.methods.lastUnlockTime().call();case 21:return w=a.sent,a.t0=e.walletlist,a.t1=s[d],a.next=26,m.methods.owner().call();case 26:return a.t2=a.sent,a.next=29,m.methods.manager().call();case 29:return a.t3=a.sent,a.t4=p,a.next=33,u.methods.isMinerOfHeight(c,s[d]).call();case 33:return a.t5=a.sent,a.next=36,m.methods.timeToStartUnlocking().call();case 36:return a.t6=a.sent,a.next=39,m.methods.timeInterval().call();case 39:return a.t7=a.sent,a.next=42,m.methods.totalWithdrawals().call();case 42:return a.t8=a.sent,a.next=45,t.eth.getBalance(s[d]);case 45:return a.t9=a.sent,a.next=48,m.methods.unlock().call({from:p});case 48:return a.t10=a.sent,a.t11=w,a.next=52,m.methods.numInterval().call();case 52:return a.t12=a.sent,a.next=55,m.methods.lastUnlockTime().call();case 55:a.t13=a.sent,a.t14={address:a.t1,owner:a.t2,manager:a.t3,creator:a.t4,miner:a.t5,timeToStartUnlocking:a.t6,timeInterval:a.t7,totalWithdrawals:a.t8,balance:a.t9,unlock:a.t10,lastUnlockTime:a.t11,numInterval:a.t12,unlockedTime:a.t13},a.t0.push.call(a.t0,a.t14),m.events.allEvents({},function(t,n){return function(a,r){Et(e,t,n)}}(d,m));case 59:d++,a.next=13;break;case 62:e.pagination.totalItems=s.length;case 63:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}function qt(e){for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}var Gt=Wt,Qt=(n("df14"),Object(c["a"])(Gt,It,Vt,!1,null,null,null)),Xt=Qt.exports;d()(Qt,{VBtn:S["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:Pe["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Le["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ne["a"],VSpacer:j["a"],VTextField:F["a"],VToolbar:P["a"],VToolbarTitle:L["b"]});var Zt={name:"Main",components:{Head:H,Content:Xt,Foot:de},data:function(){return{}}},en=Zt,tn=Object(c["a"])(en,Mt,Ot,!1,null,null,null),nn=tn.exports;d()(tn,{VApp:m["a"]}),a["a"].use(g["a"]);var an=new g["a"]({routes:[{path:"/",name:"owner",component:Ke},{path:"/creator",name:"creator",component:nn},{path:"/manager",name:"manager",component:Tt},{path:"/transactions",name:"Transactions",component:fe}]});window.Web=v.a,window.Factoryabi=[{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfCreator",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfManager",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"sender",type:"address"},{indexed:!1,name:"wallet",type:"address"}],name:"Instantiation",type:"event"},{constant:!1,inputs:[{name:"_owner",type:"address"},{name:"_manager",type:"address"},{name:"start",type:"uint64"},{name:"interval",type:"uint64"},{name:"_numInterval",type:"uint64"}],name:"create",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"},{name:"_newOwner",type:"address"}],name:"replaceOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"getOwnedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"getOwnedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_creator",type:"address"},{name:"_newCreator",type:"address"}],name:"replaceCreator",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"creator",type:"address"}],name:"getCreatedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"creator",type:"address"}],name:"getCreatedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_manager",type:"address"},{name:"_newManager",type:"address"}],name:"replaceManager",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_manager",type:"address"}],name:"getManagedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_manager",type:"address"}],name:"getManagedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"}],window.Walletabi=[{constant:!0,inputs:[],name:"creator",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"manager",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalWithdrawals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timeToStartUnlocking",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timeInterval",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"lastUnlockTime",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"numInterval",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"factory",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_owner",type:"address"},{name:"_creator",type:"address"},{name:"_manager",type:"address"},{name:"start",type:"uint64"},{name:"interval",type:"uint64"},{name:"_numInterval",type:"uint64"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!1,name:"sender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"owner",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Withdrew",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"owner",type:"address"},{indexed:!1,name:"newOwner",type:"address"}],name:"OwnerReplaced",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"creator",type:"address"},{indexed:!1,name:"newCreator",type:"address"}],name:"CreatorReplaced",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"owner",type:"address"}],name:"MinerRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_manager",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Revocation",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"manager",type:"address"},{indexed:!1,name:"newManager",type:"address"}],name:"ManagerReplaced",type:"event"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"replaceOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_newCreator",type:"address"}],name:"replaceCreator",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newManager",type:"address"}],name:"replaceManager",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"t",type:"uint64"}],name:"timeToInterval",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"currTime",type:"uint64"}],name:"amountToUnlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"unlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"revoke",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"start",type:"uint64"},{name:"lifespan",type:"uint32"},{name:"vrfVerifier",type:"bytes32"},{name:"voteVerifier",type:"bytes32"}],name:"registerMiner",outputs:[{name:"suc",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],window.minerabi=[{anonymous:!1,inputs:[{indexed:!1,name:"start",type:"uint256"},{indexed:!1,name:"miner",type:"address"}],name:"Added",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"start",type:"uint256"},{indexed:!1,name:"miner",type:"address"}],name:"Updated",type:"event"},{constant:!1,inputs:[{name:"start",type:"uint64"},{name:"lifespan",type:"uint32"},{name:"coinbase",type:"address"},{name:"vrfVerifier",type:"bytes32"},{name:"voteVerifier",type:"bytes32"}],name:"set",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"number",type:"uint256"},{name:"coinbase",type:"address"}],name:"setCoinbase",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"miner",type:"address"}],name:"get",outputs:[{name:"",type:"uint64"},{name:"",type:"uint32"},{name:"",type:"address"},{name:"",type:"bytes32"},{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"addr",type:"address"}],name:"isMinerOfHeight",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"}],name:"getNewAddedMinersCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"index",type:"uint32"}],name:"getNewAddedMiner",outputs:[{name:"miner",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],window.mineraddress="0x1000000000000000000000000000000000000002",window.host="https://api.kalscan.io/mainnet",window.FactoryAddress="0xec0574196e1832311466b9f14bae25be7a49f7ee",window.networkid=888,a["a"].config.productionTip=!1,new a["a"]({el:"#app",router:an,components:{App:w},render:function(e){return e(w)}})},6172:function(e,t,n){},"9fe2":function(e,t,n){},a7f5:function(e,t,n){"use strict";var a=n("9fe2"),r=n.n(a);r.a},c85e:function(e,t,n){},df14:function(e,t,n){"use strict";var a=n("6172"),r=n.n(a);r.a},e679:function(e,t,n){},f5e0:function(e,t,n){"use strict";var a=n("e679"),r=n.n(a);r.a}});
//# sourceMappingURL=index.49565c1c.js.map