(function(e){function t(t){for(var a,l,o=t[0],s=t[1],c=t[2],d=0,m=[];d<o.length;d++)l=o[d],r[l]&&m.push(r[l][0]),r[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,o=1;o<n.length;o++){var s=n[o];0!==r[s]&&(a=!1)}a&&(i.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={index:0},i=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},"25d1":function(e,t,n){},2686:function(e,t,n){"use strict";var a=n("c85e"),r=n.n(a);r.a},3:function(e,t){},4:function(e,t){},"4e91":function(e,t,n){"use strict";var a=n("25d1"),r=n.n(a);r.a},"55d6":function(e,t,n){"use strict";var a=n("55fd"),r=n.n(a);r.a},"55fd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("14c6"),n("08c1"),n("4842"),n("d9fc");var a=n("2b0e"),r=n("bb71");n("da64");a["a"].use(r["a"],{iconfont:"md"});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("router-view")],1)},l=[],o={name:"App",components:{},data:function(){return{}}},s=o,c=n("2877"),u=n("6544"),d=n.n(u),m=n("7496"),w=Object(c["a"])(s,i,l,!1,null,null,null),p=w.exports;d()(w,{VApp:m["a"]});var f=n("6314"),v=n.n(f),g=n("8c4f"),x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Head"),n("Content"),n("Foot")],1)},b=[],k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"Head"}},[n("v-toolbar",{attrs:{color:"blue darken-3",app:""}},[n("v-toolbar-items",[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-btn",e._g({attrs:{flat:"",dark:"",large:""}},a),[e._v("\n            "+e._s(e.path)+"\n            "),n("v-icon",{attrs:{dark:"",left:""}},[e._v("arrow_drop_down")])],1)]}}])},[n("v-list",[n("v-list-tile",[n("v-list-tile-title",[n("v-icon",{attrs:{dark:"",color:"red"}},[e._v("person_pin")]),n("a",{attrs:{href:"#/"}},[e._v(" 我的锁定钱包")])],1)],1),n("v-list-tile",[n("v-list-tile-title",[n("v-icon",{attrs:{dark:"",color:"red"}},[e._v("perm_contact_calendar")]),n("a",{attrs:{href:"#/creator"}},[e._v(" 创建锁定钱包")])],1)],1),n("v-list-tile",[n("v-list-tile-title",[n("v-icon",{attrs:{dark:"",color:"red"}},[e._v(" monetization_on")]),n("a",{attrs:{href:"#/manager"}},[e._v(" 管理锁定钱包")])],1)],1)],1)],1)],1),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",dark:"",large:"",href:"#/transactions"}},[e._v("\n        Transactions\n      ")])],1),n("v-spacer"),n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[e.isonline?n("span",{staticStyle:{color:"white"}},[n("br"),e._v("\n      \n         "+e._s(e.account)+"\n      ")]):e._e(),e.isonline?e._e():n("v-text-field",{staticStyle:{width:"380px"},attrs:{"single-line":"",outlined:"",dark:"",label:"address"},model:{value:e.account,callback:function(t){e.account=t},expression:"account"}}),e.isonline?e._e():n("v-btn",{attrs:{flat:"",icon:"",color:"white"},on:{click:e.search}},[n("v-icon",[e._v("search")])],1)],1),n("v-toolbar-items",{staticClass:"hidden-sm-and-down",staticStyle:{"min-width":"65px"}},[e.balance>0?n("span",{staticStyle:{color:"white",margin:"0 10px"}},[n("br"),e._v("\n        "+e._s((e.balance/1e18).toFixed(3))+" KAL\n      ")]):e._e()]),e.isonline?n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",icon:"",color:"#2de234"}},[n("i",{staticClass:"fas fa-circle"})])],1):e._e(),e.isonline?e._e():n("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[n("v-btn",{attrs:{flat:"",icon:"",dark:""},on:{click:e.offline}},[n("i",{staticClass:"fas fa-plug"})])],1)],1)],1)},y=[],_=(n("96cf"),n("28a5"),n("3b8d")),T=(n("386d"),{name:"Head",data:function(){return{isonline:!1,loading:!1,balance:0,account:"",web3:null,path:""}},mounted:function(){var e=this;"/"==e.$route.path?e.path="我的锁定钱包":"/creator"==e.$route.path?e.path="创建锁定钱包":"/manager"==e.$route.path?e.path="管理锁定钱包":e.path="锁定钱包";var t=A("address");if(""!=t)return e.account=t.toLowerCase(),e.web3=new window.Web(new window.Web.providers.HttpProvider(window.host)),M(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var n=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(n),O(e))},1e3);return!1}O(e)}},methods:{offline:function(){"undefined"!==typeof window.ethereum?ethereum.enable().then(function(e){if("undefined"===typeof web3);else{var t=window.location.href,n=(window.location.search.substr(1),t.substr(0,t.indexOf("?")));window.location.href=n}}).catch(function(e){console.log(e)}):confirm("Download MetaMask?")&&window.open("https://metamask.io/")},getBalance:function(){var e=this;e.loading=!0;var t=e.web3;t.eth.getBalance(e.account).then(function(t){e.loading=!1,e.balance=t})},search:function(){window.location.href="?address="+this.account}}});function O(e){e.account=ethereum.selectedAddress;var t=e.web3;t.eth.getBalance(e.account).then(function(t){e.balance=t}),e.isonline=!0;setInterval(function(){ethereum.selectedAddress!==e.account&&e.$router.go(0),t.eth.getBalance(e.account).then(function(t){e.balance=t})},1e3)}function M(e){return C.apply(this,arguments)}function C(){return C=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.web3,n.eth.getBalance(t.account).then(function(e){t.balance=e});case 2:case"end":return e.stop()}},e)})),C.apply(this,arguments)}function A(e){for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}var V=T,R=(n("4e91"),n("8336")),S=n("132d"),U=n("8860"),W=n("ba95"),I=n("5d23"),B=n("e449"),j=n("9910"),$=n("2677"),E=n("71d9"),L=n("2a7f"),F=Object(c["a"])(V,k,y,!1,null,null,null),P=F.exports;d()(F,{VBtn:R["a"],VIcon:S["a"],VList:U["a"],VListTile:W["a"],VListTileTitle:I["b"],VMenu:B["a"],VSpacer:j["a"],VTextField:$["a"],VToolbar:E["a"],VToolbarItems:L["a"]});var N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[n("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md10:"",xl8:""}},[n("v-card",[n("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[n("v-toolbar-title",[e._v("Transactions  ")]),n("v-spacer"),n("v-btn",{staticClass:"mb-2",attrs:{round:"",color:"error",outline:""},on:{click:e.RemoveAll}},[e._v("Remove All")])],1),n("v-card-text",{staticClass:"px-0"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.txlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-start"},[n("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                      "+e._s(t.item.hash)+"\n                      ")])]),n("td",{staticClass:"text-xs-start"},[n("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.from)+"\n                    ")])]),n("td",{staticClass:"text-xs-start"},[n("span",{staticStyle:{"max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.to)+"\n                    ")])]),n("td",{staticClass:"text-xs-start"},[e._v(e._s(t.item.value/1e18))]),n("td",{staticClass:"text-xs-start"},[n("span",{staticStyle:{"max-width":"200px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v("\n                    "+e._s(t.item.input)+"\n                    ")])]),n("td",{staticClass:"text-xs-start"},[e._v(e._s("0x1"==t.item.status?"success":"0x0"==t.item.status?"failed":"pending"))]),n("td",{staticClass:"text-xs-start"},[n("v-icon",{on:{click:function(n){return e.deleteTx(t.item)}}},[e._v("delete")])],1)]}}])}),n("div",{staticClass:"text-xs-right pt-2"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1)],1)},K=[],H=[{text:"Hash",value:"hash",align:"left",sortable:!1},{text:"From",value:"from",align:"left",sortable:!1},{text:"To",value:"to",sortable:!1},{text:"Value (KAL)",value:"value",sortable:!1},{text:"Data",value:"input",sortable:!1},{text:"Status",value:"status",sortable:!1},{text:"Remove",value:"remove",sortable:!1}],D={name:"Content",components:{},data:function(){return{dialog:!1,headers:H,transaction:{to:"",value:"",input:""},txlist:[],pagination:{rowsPerPage:5,totalItems:11}}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.txlist.length/this.pagination.rowsPerPage)}},mounted:function(){var e=this;if(null!=window.txlist){for(var t=0;t<window.txlist.length;t++)null==window.txlist[t]["status"]&&(window.txlist[t]["status"]="pending");e.txlist=window.txlist}z(e)},methods:{deleteTx:function(e){var t=this.txlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&(this.txlist.splice(t,1),window.txlist=this.txlist),this.pagination.totalItems=this.txlist.length},RemoveAll:function(){confirm("Are you sure you want to delete all item?")&&(this.txlist=[],window.txlist=[],this.pagination.totalItems=this.txlist.length)},sendTransaction:function(){}}};function z(e){if("undefined"!=typeof window.ethereum)for(var t=0;t<e.txlist.length;t++)Y(e,t)}function Y(e,t){if("undefined"!=typeof window.ethereum){e.txlist[t]["blockNubmer"];var n=e.txlist[t]["hash"];web3.eth.getTransactionReceipt(n,function(n,a){null!=a&&(e.txlist[t]["blockNumber"]=a["blockNumber"],e.txlist[t]["status"]=a["status"])})}}var J=D,q=(n("55d6"),n("b0af")),G=n("99d9"),Q=n("a523"),X=n("549c"),Z=n("8fea"),ee=n("0e8f"),te=n("a722"),ne=n("891e"),ae=Object(c["a"])(J,N,K,!1,null,null,null),re=ae.exports;d()(ae,{VBtn:R["a"],VCard:q["a"],VCardText:G["b"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VFlex:ee["a"],VIcon:S["a"],VLayout:te["a"],VPagination:ne["a"],VSpacer:j["a"],VToolbar:E["a"],VToolbarTitle:L["b"]});var ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"Foot"}},[n("v-footer",{attrs:{dark:"",color:"blue darken-3",height:"auto"}},[n("v-spacer"),n("v-flex",{attrs:{calss:"white--text"}},[e._v("\n      ©2019 — "),n("strong",[e._v("kaleidochain")])])],1)],1)},le=[],oe={name:"Foot"},se=oe,ce=n("553a"),ue=Object(c["a"])(se,ie,le,!1,null,null,null),de=ue.exports;d()(ue,{VFlex:ee["a"],VFooter:ce["a"],VSpacer:j["a"]});var me={name:"Transactions",components:{Head:P,Content:re,Foot:de},data:function(){return{}}},we=me,pe=Object(c["a"])(we,x,b,!1,null,null,null),fe=pe.exports;d()(pe,{VApp:m["a"]});var ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Head"),n("Content"),n("Foot")],1)},he=[],ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[n("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[n("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[n("v-card",[n("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[n("v-toolbar-title",[e._v("Wallets List")]),n("v-spacer")],1),n("v-card-text",{staticClass:"px-0"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))]),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",outline:"",color:"info"},on:{click:function(n){e.dialog_replaceOwner=!0,e.dialog_item=t.item}}},[e._v("\n                        修改\n                    ")])],1),n("td",{staticClass:"text-xs-center"},[e._v(e._s(t.item.miner)+"\n\n                      "),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,outline:"",small:"",flat:"",color:"info"},on:{click:function(n){e.dialog_registerminer=!0,e.dialog_item=t.item}}},[e._v("\n                        注册\n                    ")])],1),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.todate(t.item.timeToUnlockAll))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.web3.utils.fromWei(t.item.balance))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.web3.utils.fromWei(e.web3.utils.toBN(t.item.balance).sub(e.web3.utils.toBN(t.item.unlocked)))))]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(e.web3.utils.fromWei(t.item.unlocked))+"\n\n                    "),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",color:"info",outline:""},on:{click:function(n){e.dialog_withdraw=!0,e.dialog_item=t.item,e.wallet.withdraw=e.web3.utils.fromWei(t.item.unlocked)}}},[e._v("提取")])],1),n("td",{staticClass:"text-xs-center"},[e._v("\n                      "+e._s(e.web3.utils.fromWei(t.item.totalWithdrawals))+"\n                  ")])]}}])}),n("div",{staticClass:"text-xs-right pt-2"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("New Wallet")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}}),n("v-text-field",{attrs:{label:"Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}}),n("v-text-field",{attrs:{label:"TimeToStartUnlocking (timestamp)"},model:{value:e.wallet.TimeToStartUnlocking,callback:function(t){e.$set(e.wallet,"TimeToStartUnlocking",t)},expression:"wallet.TimeToStartUnlocking"}}),n("v-text-field",{attrs:{label:"TimeInterval (secs)"},model:{value:e.wallet.TimeInterval,callback:function(t){e.$set(e.wallet,"TimeInterval",t)},expression:"wallet.TimeInterval"}}),n("v-text-field",{attrs:{label:"AmountOfEachUnlock (KAL)"},model:{value:e.wallet.AmountOfEachUnlock,callback:function(t){e.$set(e.wallet,"AmountOfEachUnlock",t)},expression:"wallet.AmountOfEachUnlock"}}),n("v-text-field",{attrs:{label:"TimeToUnlockAll (timestamp)"},model:{value:e.wallet.TimeToUnlockAll,callback:function(t){e.$set(e.wallet,"TimeToUnlockAll",t)},expression:"wallet.TimeToUnlockAll"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.creatWallet}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceManager,callback:function(t){e.dialog_replaceManager=t},expression:"dialog_replaceManager"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Manager")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceManager}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceManager=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceOwner,callback:function(t){e.dialog_replaceOwner=t},expression:"dialog_replaceOwner"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Owner")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceOwner}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceOwner=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_registerminer,callback:function(t){e.dialog_registerminer=t},expression:"dialog_registerminer"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Register Miner")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Start Block"},model:{value:e.registerminer.start,callback:function(t){e.$set(e.registerminer,"start",t)},expression:"registerminer.start"}}),n("v-text-field",{attrs:{label:"Lifespan"},model:{value:e.registerminer.lifespan,callback:function(t){e.$set(e.registerminer,"lifespan",t)},expression:"registerminer.lifespan"}}),n("v-text-field",{attrs:{label:"vrf Verifier"},model:{value:e.registerminer.vrfVerifier,callback:function(t){e.$set(e.registerminer,"vrfVerifier",t)},expression:"registerminer.vrfVerifier"}}),n("v-text-field",{attrs:{label:"vote Verifier"},model:{value:e.registerminer.voteVerifier,callback:function(t){e.$set(e.registerminer,"voteVerifier",t)},expression:"registerminer.voteVerifier"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.registerMiner}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_registerminer=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_sendTransaction,callback:function(t){e.dialog_sendTransaction=t},expression:"dialog_sendTransaction"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Send Transaction")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.Value,callback:function(t){e.$set(e.wallet,"Value",t)},expression:"wallet.Value"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.sendTransaction}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_sendTransaction=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_withdraw,callback:function(t){e.dialog_withdraw=t},expression:"dialog_withdraw"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Withdraw")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.withdraw,callback:function(t){e.$set(e.wallet,"withdraw",t)},expression:"wallet.withdraw"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.withdraw}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_withdraw=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_revoke,callback:function(t){e.dialog_revoke=t},expression:"dialog_revoke"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Revoke")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.revoke,callback:function(t){e.$set(e.wallet,"revoke",t)},expression:"wallet.revoke"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.revoke}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_revoke=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},xe=[],be=(n("6b54"),[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",align:"center",sortable:!1},{text:"Miner",value:"miner",sortable:!1,align:"center"},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1,align:"center"},{text:"UnlockAll",value:"timeToUnlockAll",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1,align:"center"},{text:"待解锁 (KAL)",value:"locked",sortable:!1,align:"center"},{text:"待提取 (KAL)",value:"unlocked",sortable:!1,align:"center"},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1,align:"center"}]),ke={name:"Content",components:{},data:function(){return{account:"",web3:null,viewmodel:!1,dialog:!1,dialog_replaceManager:!1,dialog_replaceOwner:!1,dialog_registerminer:!1,dialog_sendTransaction:!1,dialog_withdraw:!1,dialog_revoke:!1,dialog_item:null,timer:null,now:0,headers:be,walletlist:[],wallet:{Manager:"",Owner:"",TimeToStartUnlocking:1,TimeInterval:1,AmountOfEachUnlock:1,TimeToUnlockAll:"",Value:1},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:100,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=He("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),ye(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var n=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(n),e.account=ethereum.selectedAddress.toLowerCase(),ye(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),ye(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;$e(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceManager:function(){var e=this;Oe(e)},replaceOwner:function(){var e=this;Ce(e)},registerMiner:function(){var e=this;Ve(e)},sendTransaction:function(){var e=this;Se(e)},withdraw:function(){var e=this;Be(e)},revoke:function(){var e=this;We(e)},todate:function(e){return _e(e)}}};function ye(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(n){return e.registerminer.start=n+200,t.eth.getBlock(n)}).then(function(t){var n=t.timestamp;e.now=n,e.wallet.TimeToStartUnlocking=n}),Pe(e)}function _e(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),o=t.getSeconds();return n+"-"+Te(a)+"-"+Te(r)+" "+Te(i)+":"+Te(l)+":"+Te(o)}function Te(e){return e<10&&(e="0"+e),e}function Oe(e){return Me.apply(this,arguments)}function Me(){return Me=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Manager,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceManager(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceManager(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceManager=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),Me.apply(this,arguments)}function Ce(e){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Owner,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceOwner(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceOwner(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceOwner=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),Ae.apply(this,arguments)}function Ve(e){return Re.apply(this,arguments)}function Re(){return Re=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=!1,e.prev=6,e.next=9,r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).call({from:i});case 9:l=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("Register Miner failed!please check params"),e.abrupt("return");case 18:o=r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).encodeABI(),s={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_registerminer=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[6,12]])})),Re.apply(this,arguments)}function Se(e){return Ue.apply(this,arguments)}function Ue(){return Ue=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.account,a=t.dialog_item.address,r=t.web3,i=t.walletlist.indexOf(t.dialog_item),new r.eth.Contract(window.Walletabi,a,{from:n}),e.next=7,r.eth.getBalance(n);case 7:if(l=e.sent,!(l<r.utils.toWei(t.wallet.Value))){e.next=11;break}return alert("Insufficient Balance"),e.abrupt("return");case 11:o=r.utils.toWei(t.wallet.Value),o=r.utils.toBN(o).toString(16),s={to:a,value:o,from:n,gas:"0x186a0"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,l){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=l.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(l.result,function(e,t){window.txlist.push(t)})),r.eth.getBalance(a).then(function(e){t.walletlist[i].balance=e}),t.dialog_sendTransaction=!1;case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}},e)})),Ue.apply(this,arguments)}function We(e){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=a.utils.toWei(t.wallet.revoke.toString(10)),o=!1,e.prev=7,e.next=10,r.methods.revoke(l).call({from:i});case 10:o=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),console.log(e.t0);case 16:if(o){e.next=19;break}return alert("Revoke failed!"),e.abrupt("return",!1);case 19:s=r.methods.revoke(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_revoke=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[7,13]])})),Ie.apply(this,arguments)}function Be(e){return je.apply(this,arguments)}function je(){return je=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=a.utils.toWei(t.wallet.withdraw.toString(10)),o=!1,e.prev=7,e.next=10,r.methods.withdraw(l).call({from:i});case 10:o=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),console.log(e.t0);case 16:if(o){e.next=19;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 19:s=r.methods.withdraw(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[7,13]])})),je.apply(this,arguments)}function $e(e){return Ee.apply(this,arguments)}function Ee(){return Ee=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.web3,a=new n.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:t.account}),e.next=4,a.methods.create(t.wallet.Manager,t.wallet.Owner,t.wallet.TimeToStartUnlocking,t.wallet.TimeInterval,n.utils.toWei(t.wallet.AmountOfEachUnlock.toString(10)),t.wallet.TimeToUnlockAll).call();case 4:if(r=e.sent,r){e.next=8;break}return alert("create wallet failed!please check params"),e.abrupt("return");case 8:i=a.methods.create(t.wallet.Manager,t.wallet.Owner,t.wallet.TimeToStartUnlocking,t.wallet.TimeInterval,n.utils.toWei(t.wallet.AmountOfEachUnlock.toString(10)),t.wallet.TimeToUnlockAll).encodeABI(),l={from:t.account,to:a.options.address,value:"0x0",data:i,gas:"0xf42400"},ethereum.send({method:"eth_sendTransaction",params:[l],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)}),t.dialog=!1),t.dialog=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}},e)})),Ee.apply(this,arguments)}function Le(e,t,n){return Fe.apply(this,arguments)}function Fe(){return Fe=Object(_["a"])(regeneratorRuntime.mark(function e(t,n,a){var r,i,l,o,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,o=t.walletlist[n]["address"],e.next=8,a.methods.owner().call();case 8:return t.walletlist[n]["owner"]=e.sent,e.next=11,a.methods.manager().call();case 11:return t.walletlist[n]["manager"]=e.sent,e.next=14,a.methods.amountOfEachUnlock().call();case 14:return t.walletlist[n]["amountOfEachUnlock"]=e.sent,e.next=17,a.methods.totalWithdrawals().call();case 17:return t.walletlist[n]["totalWithdrawals"]=e.sent,e.next=20,r.eth.getBalance(o);case 20:return t.walletlist[n]["balance"]=e.sent,e.next=23,a.methods.unlocked().call();case 23:return t.walletlist[n]["unlocked"]=e.sent,t.walletlist[n]["miner"]="",e.next=27,i.methods.isMinerOfHeight(1e6*(Math.floor(l/1e6)+1)-10,o).call();case 27:if(s=e.sent,s){e.next=35;break}return e.next=31,i.methods.get(l+1e6,o).call();case 31:c=e.sent,0!=c[0]?t.walletlist[n]["miner"]+="已注册,("+c[0]+","+1e6*(Math.floor(c[0]/1e6)+1)+"]":t.walletlist[n]["miner"]="未挖矿",e.next=44;break;case 35:return t.walletlist[n]["miner"]="挖矿中",e.next=38,i.methods.get(l,o).call();case 38:return u=e.sent,t.walletlist[n]["miner"]+=":("+u[0]+","+1e6*(Math.floor(u[0]/1e6)+1)+"]",e.next=42,i.methods.get(l+1e6,o).call();case 42:c=e.sent,0!=c[0]&&(t.walletlist[n]["miner"]+=",("+c[0]+","+1e6*(Math.floor(c[0]/1e6)+1)+"]");case 44:case"end":return e.stop()}},e)})),Fe.apply(this,arguments)}function Pe(e){return Ne.apply(this,arguments)}function Ne(){return Ne=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c,u,d,m,w,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return n=t.account,a=t.web3,e.next=6,a.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择Kaleidochain网络"),i=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:n}),l=new a.eth.Contract(window.minerabi,window.mineraddress),e.next=12,a.eth.getBlockNumber();case 12:return o=e.sent,e.next=15,i.methods.getOwnedWallets(n).call();case 15:s=e.sent,t.walletlist=[],c=0;case 18:if(!(c<s.length)){e.next=77;break}return u=new a.eth.Contract(window.Walletabi,s[c],{from:n}),e.t0=t.walletlist,e.t1=s[c],e.next=24,u.methods.owner().call();case 24:return e.t2=e.sent,e.next=27,u.methods.manager().call();case 27:return e.t3=e.sent,e.next=30,u.methods.timeToStartUnlocking().call();case 30:return e.t4=e.sent,e.next=33,u.methods.timeInterval().call();case 33:return e.t5=e.sent,e.next=36,u.methods.timeToUnlockAll().call();case 36:return e.t6=e.sent,e.next=39,u.methods.amountOfEachUnlock().call();case 39:return e.t7=e.sent,e.next=42,u.methods.totalWithdrawals().call();case 42:return e.t8=e.sent,e.next=45,a.eth.getBalance(s[c]);case 45:return e.t9=e.sent,e.next=48,u.methods.unlocked().call();case 48:return e.t10=e.sent,e.t11={address:e.t1,owner:e.t2,manager:e.t3,miner:"",timeToStartUnlocking:e.t4,timeInterval:e.t5,timeToUnlockAll:e.t6,amountOfEachUnlock:e.t7,totalWithdrawals:e.t8,balance:e.t9,unlocked:e.t10},e.t0.push.call(e.t0,e.t11),d=s[c],e.next=54,l.methods.isMinerOfHeight(1e6*(Math.floor(o/1e6)+1)-10,d).call();case 54:if(m=e.sent,m){e.next=62;break}return e.next=58,l.methods.get(o+1e6,d).call();case 58:w=e.sent,0!=w[0]?t.walletlist[c]["miner"]+="已注册,("+w[0]+","+1e6*(Math.floor(w[0]/1e6)+1)+"]":t.walletlist[c]["miner"]="未挖矿",e.next=71;break;case 62:return t.walletlist[c]["miner"]="挖矿中",e.next=65,l.methods.get(o,d).call();case 65:return p=e.sent,t.walletlist[c]["miner"]+=":("+p[0]+","+1e6*(Math.floor(p[0]/1e6)+1)+"]",e.next=69,l.methods.get(o+1e6,d).call();case 69:w=e.sent,0!=w[0]&&(t.walletlist[c]["miner"]+=",("+w[0]+","+1e6*(Math.floor(w[0]/1e6)+1)+"]");case 71:if(!t.viewmodel){e.next=73;break}return e.abrupt("continue",74);case 73:u.events.allEvents({},function(e,n){return function(a,r){Le(t,e,n)}}(c,u));case 74:c++,e.next=18;break;case 77:t.pagination.totalItems=s.length,Ke(t);case 79:case"end":return e.stop()}},e)})),Ne.apply(this,arguments)}function Ke(e){if(e.viewmodel)return!0;var t=e.web3,n=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});n.events.Instantiation({},function(){var a=Object(_["a"])(regeneratorRuntime.mark(function a(r,i){var l,o,s,c,u,d,m,w,p,f,v;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return l=e.walletlist.length,a.next=3,n.methods.getOwnedWallets(e.account).call();case 3:if(o=a.sent,s=o.length,l!=s){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,t.eth.getBlockNumber();case 9:c=a.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),d=l;case 12:if(!(d<o.length)){a.next=69;break}return m=new t.eth.Contract(window.Walletabi,o[d]),a.t0=e.walletlist,a.t1=o[d],a.next=18,m.methods.owner().call();case 18:return a.t2=a.sent,a.next=21,m.methods.manager().call();case 21:return a.t3=a.sent,a.next=24,m.methods.timeToStartUnlocking().call();case 24:return a.t4=a.sent,a.next=27,m.methods.timeInterval().call();case 27:return a.t5=a.sent,a.next=30,m.methods.timeToUnlockAll().call();case 30:return a.t6=a.sent,a.next=33,m.methods.amountOfEachUnlock().call();case 33:return a.t7=a.sent,a.next=36,m.methods.totalWithdrawals().call();case 36:return a.t8=a.sent,a.next=39,t.eth.getBalance(o[d]);case 39:return a.t9=a.sent,a.next=42,m.methods.unlocked().call();case 42:return a.t10=a.sent,a.t11={address:a.t1,owner:a.t2,manager:a.t3,miner:"",timeToStartUnlocking:a.t4,timeInterval:a.t5,timeToUnlockAll:a.t6,amountOfEachUnlock:a.t7,totalWithdrawals:a.t8,balance:a.t9,unlocked:a.t10},a.t0.push.call(a.t0,a.t11),w=o[d],a.next=48,u.methods.isMinerOfHeight(1e6*(Math.floor(c/1e6)+1)-10,w).call();case 48:if(p=a.sent,p){a.next=56;break}return a.next=52,u.methods.get(c+1e6,w).call();case 52:f=a.sent,0!=f[0]?e.walletlist[d]["miner"]+="已注册,("+f[0]+","+1e6*(Math.floor(f[0]/1e6)+1)+"]":e.walletlist[d]["miner"]="未挖矿",a.next=65;break;case 56:return e.walletlist[d]["miner"]="挖矿中",a.next=59,u.methods.get(c,w).call();case 59:return v=a.sent,e.walletlist[d]["miner"]+=":("+v[0]+","+1e6*(Math.floor(v[0]/1e6)+1)+"]",a.next=63,u.methods.get(c+1e6,w).call();case 63:f=a.sent,0!=f[0]&&(e.walletlist[d]["miner"]+=",("+f[0]+","+1e6*(Math.floor(f[0]/1e6)+1)+"]");case 65:m.events.allEvents({},function(t,n){return function(a,r){Le(e,t,n)}}(d,m));case 66:d++,a.next=12;break;case 69:e.pagination.totalItems=o.length;case 70:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}function He(e){for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}var De=ke,ze=(n("f5e0"),n("12b2")),Ye=n("169a"),Je=Object(c["a"])(De,ge,xe,!1,null,null,null),qe=Je.exports;d()(Je,{VBtn:R["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:ze["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Ye["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ne["a"],VSpacer:j["a"],VTextField:$["a"],VToolbar:E["a"],VToolbarTitle:L["b"]});var Ge={name:"Main",components:{Head:P,Content:qe,Foot:de},data:function(){return{}}},Qe=Ge,Xe=(n("a7f5"),Object(c["a"])(Qe,ve,he,!1,null,"37fec980",null)),Ze=Xe.exports;d()(Xe,{VApp:m["a"]});var et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Head"),n("Content"),n("Foot")],1)},tt=[],nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[n("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[n("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[n("v-card",[n("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[n("v-toolbar-title",[e._v("Wallets List")]),n("v-spacer")],1),n("v-card-text",{staticClass:"px-0"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"inherit","max-width":"100px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.manager))]),n("v-btn",{staticStyle:{padding:"0",height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",outline:"",color:"info"},on:{click:function(n){e.dialog_replaceManager=!0,e.dialog_item=t.item}}},[e._v("\n                        修改\n                    ")])],1),n("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToUnlockAll))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(t.item.balance))+"\n                      "),n("v-btn",{staticStyle:{height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",outline:"",color:"info"},on:{click:function(n){e.dialog_sendTransaction=!0,e.dialog_item=t.item}}},[e._v("\n                        转入\n                        ")])],1),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(e.web3.utils.toBN(t.item.balance).sub(e.web3.utils.toBN(t.item.unlocked))))+"\n                      "),n("v-btn",{staticStyle:{height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",outline:"",color:"error"},on:{click:function(n){e.dialog_revoke=!0,e.dialog_item=t.item,e.wallet.revoke=e.web3.utils.fromWei(e.web3.utils.toBN(t.item.balance).sub(e.web3.utils.toBN(t.item.unlocked)))}}},[e._v("\n                        撤回\n                        ")])],1),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(t.item.unlocked))+"\n                    ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                      "+e._s(e.web3.utils.fromWei(t.item.totalWithdrawals))+"\n                    \n                    \n                    \n                  ")])]}}])}),n("div",{staticClass:"text-xs-right pt-2"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("New Wallet")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}}),n("v-text-field",{attrs:{label:"Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}}),n("v-text-field",{attrs:{label:"TimeToStartUnlocking (timestamp)"},model:{value:e.wallet.TimeToStartUnlocking,callback:function(t){e.$set(e.wallet,"TimeToStartUnlocking",t)},expression:"wallet.TimeToStartUnlocking"}}),n("v-text-field",{attrs:{label:"TimeInterval (secs)"},model:{value:e.wallet.TimeInterval,callback:function(t){e.$set(e.wallet,"TimeInterval",t)},expression:"wallet.TimeInterval"}}),n("v-text-field",{attrs:{label:"AmountOfEachUnlock (KAL)"},model:{value:e.wallet.AmountOfEachUnlock,callback:function(t){e.$set(e.wallet,"AmountOfEachUnlock",t)},expression:"wallet.AmountOfEachUnlock"}}),n("v-text-field",{attrs:{label:"TimeToUnlockAll (timestamp)"},model:{value:e.wallet.TimeToUnlockAll,callback:function(t){e.$set(e.wallet,"TimeToUnlockAll",t)},expression:"wallet.TimeToUnlockAll"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.creatWallet}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceManager,callback:function(t){e.dialog_replaceManager=t},expression:"dialog_replaceManager"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Manager")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceManager}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceManager=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceOwner,callback:function(t){e.dialog_replaceOwner=t},expression:"dialog_replaceOwner"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Owner")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceOwner}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceOwner=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_registerminer,callback:function(t){e.dialog_registerminer=t},expression:"dialog_registerminer"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Register Miner")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Start Block"},model:{value:e.registerminer.start,callback:function(t){e.$set(e.registerminer,"start",t)},expression:"registerminer.start"}}),n("v-text-field",{attrs:{label:"Lifespan"},model:{value:e.registerminer.lifespan,callback:function(t){e.$set(e.registerminer,"lifespan",t)},expression:"registerminer.lifespan"}}),n("v-text-field",{attrs:{label:"vrf Verifier"},model:{value:e.registerminer.vrfVerifier,callback:function(t){e.$set(e.registerminer,"vrfVerifier",t)},expression:"registerminer.vrfVerifier"}}),n("v-text-field",{attrs:{label:"vote Verifier"},model:{value:e.registerminer.voteVerifier,callback:function(t){e.$set(e.registerminer,"voteVerifier",t)},expression:"registerminer.voteVerifier"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.registerMiner}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_registerminer=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_sendTransaction,callback:function(t){e.dialog_sendTransaction=t},expression:"dialog_sendTransaction"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Send Transaction")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.Value,callback:function(t){e.$set(e.wallet,"Value",t)},expression:"wallet.Value"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.sendTransaction}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_sendTransaction=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_withdraw,callback:function(t){e.dialog_withdraw=t},expression:"dialog_withdraw"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Withdraw")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.withdraw,callback:function(t){e.$set(e.wallet,"withdraw",t)},expression:"wallet.withdraw"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.withdraw}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_withdraw=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_revoke,callback:function(t){e.dialog_revoke=t},expression:"dialog_revoke"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Revoke")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.revoke,callback:function(t){e.$set(e.wallet,"revoke",t)},expression:"wallet.revoke"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.revoke}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_revoke=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},at=[],rt=[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",sortable:!1,align:"center"},{text:"Manager",value:"manager",sortable:!1,align:"center"},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1,align:"center"},{text:"UnlockAll",value:"timeToUnlockAll",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1,align:"center"},{text:"待解锁 (KAL)",value:"locked",sortable:!1,align:"center"},{text:"待提取 (KAL)",value:"unlocked",sortable:!1,align:"center"},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1,align:"center"}],it={name:"Content",components:{},data:function(){return{account:"",web3:null,viewmodel:!1,dialog:!1,dialog_replaceManager:!1,dialog_replaceOwner:!1,dialog_registerminer:!1,dialog_sendTransaction:!1,dialog_withdraw:!1,dialog_revoke:!1,dialog_item:null,now:0,timer:null,headers:rt,walletlist:[],wallet:{Manager:"",Owner:"",TimeToStartUnlocking:1,TimeInterval:1,AmountOfEachUnlock:1,TimeToUnlockAll:"",Value:1},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:0,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=At("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),lt(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var n=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(n),e.account=ethereum.selectedAddress.toLowerCase(),lt(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),lt(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;kt(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceManager:function(){var e=this;ct(e)},replaceOwner:function(){var e=this;dt(e)},registerMiner:function(){var e=this;wt(e)},sendTransaction:function(){var e=this;ft(e)},withdraw:function(){var e=this;xt(e)},revoke:function(){var e=this;ht(e)},todate:function(e){return ot(e)}}};function lt(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(e){return t.eth.getBlock(e)}).then(function(t){var n=t.timestamp;e.now=n,e.wallet.TimeToStartUnlocking=n}),Ot(e)}function ot(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),o=t.getSeconds();return n+"-"+st(a)+"-"+st(r)+" "+st(i)+":"+st(l)+":"+st(o)}function st(e){return e<10&&(e="0"+e),e}function ct(e){return ut.apply(this,arguments)}function ut(){return ut=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Manager,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceManager(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceManager(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceManager=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),ut.apply(this,arguments)}function dt(e){return mt.apply(this,arguments)}function mt(){return mt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Owner,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceOwner(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceOwner(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceOwner=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),mt.apply(this,arguments)}function wt(e){return pt.apply(this,arguments)}function pt(){return pt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=!1,e.prev=6,e.next=9,r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).call({from:i});case 9:l=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("Register Miner failed!please check params"),e.abrupt("return");case 18:o=r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).encodeABI(),s={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_registerminer=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[6,12]])})),pt.apply(this,arguments)}function ft(e){return vt.apply(this,arguments)}function vt(){return vt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.account,a=t.dialog_item.address,r=t.web3,i=t.walletlist.indexOf(t.dialog_item),new r.eth.Contract(window.Walletabi,a,{from:n}),e.next=7,r.eth.getBalance(n);case 7:if(l=e.sent,!(l<t.web3.utils.toWei(t.wallet.Value))){e.next=11;break}return alert("Insufficient Balance"),e.abrupt("return");case 11:o=r.utils.toWei(t.wallet.Value),o=r.utils.toBN(o).toString(16),s={to:a,value:o,from:n,gas:"0x186a0"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,l){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=l.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(l.result,function(e,t){window.txlist.push(t)})),r.eth.getBalance(a).then(function(e){t.walletlist[i].balance=e}),t.dialog_sendTransaction=!1;case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}},e)})),vt.apply(this,arguments)}function ht(e){return gt.apply(this,arguments)}function gt(){return gt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=a.utils.toWei(t.wallet.revoke.toString(10)),o=!1,e.prev=7,e.next=10,r.methods.revoke(l).call({from:i});case 10:o=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),console.log(e.t0);case 16:if(o){e.next=19;break}return alert("Revoke failed!"),e.abrupt("return",!1);case 19:s=r.methods.revoke(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_revoke=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[7,13]])})),gt.apply(this,arguments)}function xt(e){return bt.apply(this,arguments)}function bt(){return bt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=a.utils.toWei(t.wallet.withdraw.toString(10)),o=!1,e.prev=7,e.next=10,r.methods.withdraw(l).call({from:i});case 10:o=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](7);case 15:if(o){e.next=18;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 18:s=r.methods.withdraw(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[7,13]])})),bt.apply(this,arguments)}function kt(e){return yt.apply(this,arguments)}function yt(){return yt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.web3,a=new n.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:t.account}),e.next=4,a.methods.create(t.wallet.Manager,t.wallet.Owner,t.wallet.TimeToStartUnlocking,t.wallet.TimeInterval,n.utils.toWei(t.wallet.AmountOfEachUnlock.toString(10)),t.wallet.TimeToUnlockAll).call();case 4:if(r=e.sent,r){e.next=8;break}return alert("create wallet failed!please check params"),e.abrupt("return");case 8:i=a.methods.create(t.wallet.Manager,t.wallet.Owner,t.wallet.TimeToStartUnlocking,t.wallet.TimeInterval,n.utils.toWei(t.wallet.AmountOfEachUnlock.toString(10)),t.wallet.TimeToUnlockAll).encodeABI(),l={from:t.account,to:a.options.address,value:"0x0",data:i,gas:"0xf42400"},ethereum.send({method:"eth_sendTransaction",params:[l],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 11:case"end":return e.stop()}},e)})),yt.apply(this,arguments)}function _t(e,t,n){return Tt.apply(this,arguments)}function Tt(){return Tt=Object(_["a"])(regeneratorRuntime.mark(function e(t,n,a){var r,i,l,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,o=t.walletlist[n]["address"],e.next=8,a.methods.owner().call();case 8:return t.walletlist[n]["owner"]=e.sent,e.next=11,a.methods.manager().call();case 11:return t.walletlist[n]["manager"]=e.sent,e.next=14,i.methods.isMinerOfHeight(l,o).call();case 14:return t.walletlist[n]["miner"]=e.sent,e.next=17,a.methods.amountOfEachUnlock().call();case 17:return t.walletlist[n]["amountOfEachUnlock"]=e.sent,e.next=20,a.methods.totalWithdrawals().call();case 20:return t.walletlist[n]["totalWithdrawals"]=e.sent,e.next=23,r.eth.getBalance(o);case 23:return t.walletlist[n]["balance"]=e.sent,e.next=26,a.methods.unlocked().call();case 26:t.walletlist[n]["unlocked"]=e.sent;case 27:case"end":return e.stop()}},e)})),Tt.apply(this,arguments)}function Ot(e){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return n=t.account,a=t.web3,e.next=6,a.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择Kaleidochain网络"),i=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:n}),l=new a.eth.Contract(window.minerabi,window.mineraddress),e.next=12,a.eth.getBlockNumber();case 12:return o=e.sent,e.next=15,i.methods.getManagedWallets(n).call();case 15:s=e.sent,t.walletlist=[],c=0;case 18:if(!(c<s.length)){e.next=60;break}return u=new a.eth.Contract(window.Walletabi,s[c],{from:n}),e.t0=t.walletlist,e.t1=s[c],e.next=24,u.methods.owner().call();case 24:return e.t2=e.sent,e.next=27,u.methods.manager().call();case 27:return e.t3=e.sent,e.next=30,l.methods.isMinerOfHeight(o,s[c]).call();case 30:return e.t4=e.sent,e.next=33,u.methods.timeToStartUnlocking().call();case 33:return e.t5=e.sent,e.next=36,u.methods.timeInterval().call();case 36:return e.t6=e.sent,e.next=39,u.methods.timeToUnlockAll().call();case 39:return e.t7=e.sent,e.next=42,u.methods.amountOfEachUnlock().call();case 42:return e.t8=e.sent,e.next=45,u.methods.totalWithdrawals().call();case 45:return e.t9=e.sent,e.next=48,a.eth.getBalance(s[c]);case 48:return e.t10=e.sent,e.next=51,u.methods.unlocked().call();case 51:if(e.t11=e.sent,e.t12={address:e.t1,owner:e.t2,manager:e.t3,miner:e.t4,timeToStartUnlocking:e.t5,timeInterval:e.t6,timeToUnlockAll:e.t7,amountOfEachUnlock:e.t8,totalWithdrawals:e.t9,balance:e.t10,unlocked:e.t11},e.t0.push.call(e.t0,e.t12),!t.viewmodel){e.next=56;break}return e.abrupt("continue",57);case 56:u.events.allEvents({},function(e,n){return function(a,r){_t(t,e,n)}}(c,u));case 57:c++,e.next=18;break;case 60:t.pagination.totalItems=s.length,Ct(t);case 62:case"end":return e.stop()}},e)})),Mt.apply(this,arguments)}function Ct(e){if(e.viewmodel)return!0;var t=e.web3,n=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});n.events.Instantiation({},function(){var a=Object(_["a"])(regeneratorRuntime.mark(function a(r,i){var l,o,s,c,u,d,m;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return l=e.walletlist.length,a.next=3,n.methods.getManagedWallets(e.account).call();case 3:if(o=a.sent,s=o.length,l!=s){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,t.eth.getBlockNumber();case 9:c=a.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),d=l;case 12:if(!(d<o.length)){a.next=52;break}return m=new t.eth.Contract(window.Walletabi,o[d]),a.t0=e.walletlist,a.t1=o[d],a.next=18,m.methods.owner().call();case 18:return a.t2=a.sent,a.next=21,m.methods.manager().call();case 21:return a.t3=a.sent,a.next=24,u.methods.isMinerOfHeight(c,o[d]).call();case 24:return a.t4=a.sent,a.next=27,m.methods.timeToStartUnlocking().call();case 27:return a.t5=a.sent,a.next=30,m.methods.timeInterval().call();case 30:return a.t6=a.sent,a.next=33,m.methods.timeToUnlockAll().call();case 33:return a.t7=a.sent,a.next=36,m.methods.amountOfEachUnlock().call();case 36:return a.t8=a.sent,a.next=39,m.methods.totalWithdrawals().call();case 39:return a.t9=a.sent,a.next=42,t.eth.getBalance(o[d]);case 42:return a.t10=a.sent,a.next=45,m.methods.unlocked().call();case 45:a.t11=a.sent,a.t12={address:a.t1,owner:a.t2,manager:a.t3,miner:a.t4,timeToStartUnlocking:a.t5,timeInterval:a.t6,timeToUnlockAll:a.t7,amountOfEachUnlock:a.t8,totalWithdrawals:a.t9,balance:a.t10,unlocked:a.t11},a.t0.push.call(a.t0,a.t12),m.events.allEvents({},function(t,n){return h("style"),function(a,r){_t(e,t,n)}}(d,m));case 49:d++,a.next=12;break;case 52:e.pagination.totalItems=o.length;case 53:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}function At(e){for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}var Vt=it,Rt=(n("2686"),Object(c["a"])(Vt,nt,at,!1,null,null,null)),St=Rt.exports;d()(Rt,{VBtn:R["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:ze["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Ye["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ne["a"],VSpacer:j["a"],VTextField:$["a"],VToolbar:E["a"],VToolbarTitle:L["b"]});var Ut={name:"Main",components:{Head:P,Content:St,Foot:de},data:function(){return{}}},Wt=Ut,It=Object(c["a"])(Wt,et,tt,!1,null,null,null),Bt=It.exports;d()(It,{VApp:m["a"]});var jt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Head"),n("Content"),n("Foot")],1)},$t=[],Et=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-content",[n("v-container",{staticStyle:{"max-width":"100%"},attrs:{"grid-list-xs":""}},[n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-flex",{attrs:{"d-flex":"",xs12:"",sm12:"",md12:"",xl10:""}},[n("v-card",[n("v-toolbar",{attrs:{color:"blue darken-3",dark:""}},[n("v-toolbar-title",[e._v("Wallets List")]),n("v-spacer"),n("v-btn",{staticClass:"mb-2",attrs:{disabled:e.viewmodel,round:"",color:"primaty",outline:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Wallets")])],1),n("v-card-text",{staticClass:"px-0"},[n("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.walletlist,"hide-actions":"",pagination:e.pagination},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"items",fn:function(t){return[n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.address))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.item.owner))])]),n("td",{staticClass:"text-xs-center"},[n("span",{staticStyle:{"vertical-align":"middle","max-width":"80px",display:"inline-block",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s("0x0000000000000000000000000000000000000000"==t.item.manager?"":t.item.manager))])]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToStartUnlocking))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    "+e._s(t.item.timeInterval>=86400?Math.floor(t.item.timeInterval/86400)+"d ":"")+"\n                    "+e._s(t.item.timeInterval>=3600?Math.floor(t.item.timeInterval%86400/3600)+"h ":"")+"\n                    "+e._s(t.item.timeInterval>=60?Math.floor(t.item.timeInterval%3600/60)+"m ":"")+"\n                    "+e._s(t.item.timeInterval%60+"s")+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                    \n                    "+e._s(e.todate(t.item.timeToUnlockAll))+"\n                  ")]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(t.item.balance))+"\n                      "),n("v-btn",{staticStyle:{height:"25px","min-width":"40px","font-size":"12px"},attrs:{disabled:e.viewmodel,small:"",flat:"",outline:"",color:"info"},on:{click:function(n){e.dialog_sendTransaction=!0,e.dialog_item=t.item}}},[e._v("\n                        转入\n                      ")])],1),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(e.web3.utils.toBN(t.item.balance).sub(e.web3.utils.toBN(t.item.unlocked))))+"\n                      ")]),n("td",{staticClass:"text-xs-center"},[e._v(e._s(e.web3.utils.fromWei(t.item.unlocked))+"\n                    ")]),n("td",{staticClass:"text-xs-center"},[e._v("\n                      "+e._s(e.web3.utils.fromWei(t.item.totalWithdrawals))+"\n                  ")])]}}])}),n("div",{staticClass:"text-xs-right pt-2"},[n("v-pagination",{attrs:{length:e.pages},model:{value:e.pagination.page,callback:function(t){e.$set(e.pagination,"page",t)},expression:"pagination.page"}})],1)],1)],1)],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("New Wallet")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}}),n("v-text-field",{attrs:{label:"Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}}),n("v-text-field",{attrs:{label:"TimeToStartUnlocking (timestamp)"},model:{value:e.wallet.TimeToStartUnlocking,callback:function(t){e.$set(e.wallet,"TimeToStartUnlocking",t)},expression:"wallet.TimeToStartUnlocking"}}),n("v-text-field",{attrs:{label:"TimeInterval (secs)"},model:{value:e.wallet.TimeInterval,callback:function(t){e.$set(e.wallet,"TimeInterval",t)},expression:"wallet.TimeInterval"}}),n("v-text-field",{attrs:{label:"AmountOfEachUnlock (KAL)"},model:{value:e.wallet.AmountOfEachUnlock,callback:function(t){e.$set(e.wallet,"AmountOfEachUnlock",t)},expression:"wallet.AmountOfEachUnlock"}}),n("v-text-field",{attrs:{label:"TimeToUnlockAll (timestamp)"},model:{value:e.wallet.TimeToUnlockAll,callback:function(t){e.$set(e.wallet,"TimeToUnlockAll",t)},expression:"wallet.TimeToUnlockAll"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.creatWallet}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceManager,callback:function(t){e.dialog_replaceManager=t},expression:"dialog_replaceManager"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Manager")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Manager"},model:{value:e.wallet.Manager,callback:function(t){e.$set(e.wallet,"Manager",t)},expression:"wallet.Manager"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceManager}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceManager=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_replaceOwner,callback:function(t){e.dialog_replaceOwner=t},expression:"dialog_replaceOwner"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Replace Owner")]),n("v-card-text",[n("v-text-field",{attrs:{label:"New Owner"},model:{value:e.wallet.Owner,callback:function(t){e.$set(e.wallet,"Owner",t)},expression:"wallet.Owner"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.replaceOwner}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_replaceOwner=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_registerminer,callback:function(t){e.dialog_registerminer=t},expression:"dialog_registerminer"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Register Miner")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Start Block"},model:{value:e.registerminer.start,callback:function(t){e.$set(e.registerminer,"start",t)},expression:"registerminer.start"}}),n("v-text-field",{attrs:{label:"Lifespan"},model:{value:e.registerminer.lifespan,callback:function(t){e.$set(e.registerminer,"lifespan",t)},expression:"registerminer.lifespan"}}),n("v-text-field",{attrs:{label:"vrf Verifier"},model:{value:e.registerminer.vrfVerifier,callback:function(t){e.$set(e.registerminer,"vrfVerifier",t)},expression:"registerminer.vrfVerifier"}}),n("v-text-field",{attrs:{label:"vote Verifier"},model:{value:e.registerminer.voteVerifier,callback:function(t){e.$set(e.registerminer,"voteVerifier",t)},expression:"registerminer.voteVerifier"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.registerMiner}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_registerminer=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_sendTransaction,callback:function(t){e.dialog_sendTransaction=t},expression:"dialog_sendTransaction"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Send Transaction")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.Value,callback:function(t){e.$set(e.wallet,"Value",t)},expression:"wallet.Value"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.sendTransaction}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_sendTransaction=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_withdraw,callback:function(t){e.dialog_withdraw=t},expression:"dialog_withdraw"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Withdraw")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.withdraw,callback:function(t){e.$set(e.wallet,"withdraw",t)},expression:"wallet.withdraw"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.withdraw}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_withdraw=!1}}},[e._v("Cancel")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"450"},model:{value:e.dialog_revoke,callback:function(t){e.dialog_revoke=t},expression:"dialog_revoke"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v("Revoke")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Value (KAL)"},model:{value:e.wallet.revoke,callback:function(t){e.$set(e.wallet,"revoke",t)},expression:"wallet.revoke"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"info"},on:{click:e.revoke}},[e._v("Send")]),n("v-btn",{attrs:{color:"error"},on:{click:function(t){e.dialog_revoke=!1}}},[e._v("Cancel")])],1)],1)],1)],1)},Lt=[],Ft=[{text:"Address",value:"address",sortable:!1,align:"center"},{text:"Owner",value:"owner",sortable:!1,align:"center"},{text:"Manager",value:"manager",sortable:!1,align:"center"},{text:"StartUnlocking",value:"timeToStartUnlocking",sortable:!1,align:"center"},{text:"TimeInterval",value:"timeInterval",sortable:!1},{text:"UnlockAll",value:"timeToUnlockAll",sortable:!1,align:"center"},{text:"Balance (KAL)",value:"balance",sortable:!1},{text:"待解锁 (KAL)",value:"locked",sortable:!1},{text:"待提取 (KAL)",value:"unlocked",sortable:!1},{text:"已提取 (KAL)",value:"totalWithdrawals",sortable:!1}],Pt={name:"Content",components:{},data:function(){return{account:"",dialog:!1,viewmodel:!1,dialog_replaceManager:!1,dialog_replaceOwner:!1,dialog_registerminer:!1,dialog_sendTransaction:!1,dialog_withdraw:!1,dialog_revoke:!1,dialog_item:null,now:0,timer:null,headers:Ft,walletlist:[],wallet:{Manager:"",Owner:"",TimeToStartUnlocking:1,TimeInterval:1,AmountOfEachUnlock:1,TimeToUnlockAll:"",Value:1},pagination:{rowsPerPage:5,totalItems:0},registerminer:{start:0,lifespan:0,vrfVerifier:"",voteVerifier:""},waletlist:[]}},computed:{pages:function(){return null==this.pagination.rowsPerPage||null==this.pagination.totalItems?0:Math.ceil(this.pagination.totalItems/this.pagination.rowsPerPage)}},mounted:function(){var e=this,t=mn("address");if(""!=t)return e.viewmodel=!0,e.account=t.toLowerCase(),e.web3=new window.Web(new Web.providers.HttpProvider(window.host)),Nt(e),!0;if("undefined"!==typeof web3){if(e.web3=new window.Web(web3.currentProvider),"undefined"==typeof ethereum.selectedAddress){var n=setInterval(function(){"undefined"!==typeof ethereum.selectedAddress&&(clearInterval(n),e.account=ethereum.selectedAddress.toLowerCase(),Nt(e))},1e3);return!1}e.account=ethereum.selectedAddress.toLowerCase(),Nt(e)}else console.log(web3)},methods:{deleteTx:function(e){var t=this.waletlist.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.waletlist.splice(t,1)},creatWallet:function(){if("undefined"!=typeof window.ethereum){var e=this;rn(e)}else confirm("Download MetaMask?")&&window.open("https://metamask.io/")},replaceManager:function(){var e=this;zt(e)},replaceOwner:function(){var e=this;Jt(e)},registerMiner:function(){var e=this;Gt(e)},sendTransaction:function(){var e=this;Xt(e)},withdraw:function(){var e=this;nn(e)},revoke:function(){var e=this;en(e)},todate:function(e){return Kt(e)}}};function Nt(e){var t=e.web3;e.wallet.Manager=e.account,e.wallet.Owner=e.account,t.eth.getBlockNumber().then(function(e){return t.eth.getBlock(e)}).then(function(t){var n=t.timestamp;e.now=n,e.wallet.TimeToStartUnlocking=Kt(n),Ht(e.wallet.TimeToStartUnlocking),e.wallet.TimeToUnlockAll=e.wallet.TimeToStartUnlocking}),cn(e)}function Kt(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),l=t.getMinutes(),o=t.getSeconds();return n+"-"+Dt(a)+"-"+Dt(r)+" "+Dt(i)+":"+Dt(l)+":"+Dt(o)}function Ht(e){var t=new Date(e),n=t.getTime();return n/1e3}function Dt(e){return e<10&&(e="0"+e),e}function zt(e){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Manager,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceManager(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceManager(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceManager=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),Yt.apply(this,arguments)}function Jt(e){return qt.apply(this,arguments)}function qt(){return qt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,l=t.wallet.Owner,t.walletlist.indexOf(t.dialog_item),o=r.methods.replaceOwner(l).call({from:i}),o){e.next=10;break}return alert("Replace Manager failed!please check params"),e.abrupt("return");case 10:s=r.methods.replaceOwner(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_replaceOwner=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}},e)})),qt.apply(this,arguments)}function Gt(e){return Qt.apply(this,arguments)}function Qt(){return Qt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=!1,e.prev=6,e.next=9,r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).call({from:i});case 9:l=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("Register Miner failed!please check params"),e.abrupt("return");case 18:o=r.methods.registerMiner(t.registerminer.start,t.registerminer.lifespan,t.registerminer.vrfVerifier,t.registerminer.voteVerifier).encodeABI(),s={from:i,to:n,value:"0x0",data:o,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_registerminer=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[6,12]])})),Qt.apply(this,arguments)}function Xt(e){return Zt.apply(this,arguments)}function Zt(){return Zt=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.account,a=t.dialog_item.address,r=t.web3,i=t.walletlist.indexOf(t.dialog_item),new r.eth.Contract(window.Walletabi,a,{from:n}),e.next=7,r.eth.getBalance(n);case 7:if(l=e.sent,!(l<r.utils.toWei(t.wallet.Value))){e.next=11;break}return alert("Insufficient Balance"),e.abrupt("return");case 11:o=r.utils.toWei(t.wallet.Value),o=r.utils.toBN(o).toString(16),s={to:a,value:o,from:n,gas:"0x186a0"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,l){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=l.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(l.result,function(e,t){window.txlist.push(t)})),r.eth.getBalance(a).then(function(e){t.walletlist[i].balance=e}),t.dialog_sendTransaction=!1;case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}},e)})),Zt.apply(this,arguments)}function en(e){return tn.apply(this,arguments)}function tn(){return tn=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=a.utils.toWei(t.wallet.revoke.toString(10)),o=!1,e.prev=7,e.next=10,r.methods.revoke(l).call({from:i});case 10:o=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),console.log(e.t0);case 16:if(o){e.next=19;break}return alert("Revoke failed!"),e.abrupt("return",!1);case 19:s=r.methods.revoke(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)}),t.dialog_revoke=!1),t.dialog_revoke=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 22:case"end":return e.stop()}},e,null,[[7,13]])})),tn.apply(this,arguments)}function nn(e){return an.apply(this,arguments)}function an(){return an=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dialog_item.address,a=t.web3,r=new a.eth.Contract(window.Walletabi,n,{from:i}),i=t.account,t.walletlist.indexOf(t.dialog_item),l=a.utils.toWei(t.wallet.withdraw.toString(10)),o=!1,e.prev=7,e.next=10,r.methods.withdraw(l).call({from:i});case 10:o=e.sent,e.next=15;break;case 13:e.prev=13,e.t0=e["catch"](7);case 15:if(o){e.next=18;break}return alert("Withdraw failed!"),e.abrupt("return",!1);case 18:s=r.methods.withdraw(l).encodeABI(),c={from:i,to:n,value:"0x0",data:s,gas:"0xf4240"},ethereum.send({method:"eth_sendTransaction",params:[c],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)})),t.dialog_withdraw=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[7,13]])})),an.apply(this,arguments)}function rn(e){return ln.apply(this,arguments)}function ln(){return ln=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.web3,a=new n.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:t.account}),r=Ht(t.wallet.TimeToStartUnlocking),i=Ht(t.wallet.TimeToUnlockAll),l=!1,e.prev=5,e.next=8,a.methods.create(t.wallet.Manager,t.wallet.Owner,r,t.wallet.TimeInterval,n.utils.toWei(t.wallet.AmountOfEachUnlock.toString(10)),i).call();case 8:l=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](5),console.log(a.options.address),console.log(e.t0);case 15:if(l){e.next=18;break}return alert("create wallet failed!please check params"),e.abrupt("return");case 18:o=a.methods.create(t.wallet.Manager,t.wallet.Owner,r,t.wallet.TimeInterval,n.utils.toWei(t.wallet.AmountOfEachUnlock.toString(10)),i).encodeABI(),s={from:t.account,to:a.options.address,value:"0x0",data:o,gas:"0xf42400"},ethereum.send({method:"eth_sendTransaction",params:[s],from:t.account},function(){var e=Object(_["a"])(regeneratorRuntime.mark(function e(n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:void 0!=a.result&&(null==window.txlist&&(window.txlist=[]),web3.eth.getTransaction(a.result,function(e,t){window.txlist.push(t)}),t.dialog=!1),t.dialog=!1;case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 21:case"end":return e.stop()}},e,null,[[5,11]])})),ln.apply(this,arguments)}function on(e,t,n){return sn.apply(this,arguments)}function sn(){return sn=Object(_["a"])(regeneratorRuntime.mark(function e(t,n,a){var r,i,l,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.web3,i=new r.eth.Contract(window.minerabi,window.mineraddress),e.next=4,r.eth.getBlockNumber();case 4:return l=e.sent,o=t.walletlist[n]["address"],e.next=8,a.methods.owner().call();case 8:return t.walletlist[n]["owner"]=e.sent,e.next=11,a.methods.manager().call();case 11:return t.walletlist[n]["manager"]=e.sent,e.next=14,i.methods.isMinerOfHeight(1e6*(Math.floor(l/1e6)+1)-10,o).call();case 14:return t.walletlist[n]["miner"]=e.sent,e.next=17,a.methods.amountOfEachUnlock().call();case 17:return t.walletlist[n]["amountOfEachUnlock"]=e.sent,e.next=20,a.methods.totalWithdrawals().call();case 20:return t.walletlist[n]["totalWithdrawals"]=e.sent,e.next=23,r.eth.getBalance(o);case 23:return t.walletlist[n]["balance"]=e.sent,e.next=26,a.methods.unlocked().call();case 26:t.walletlist[n]["unlocked"]=e.sent;case 27:case"end":return e.stop()}},e)})),sn.apply(this,arguments)}function cn(e){return un.apply(this,arguments)}function un(){return un=Object(_["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i,l,o,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"!=typeof window.ethereum){e.next=2;break}return e.abrupt("return");case 2:return n=t.account,a=t.web3,e.next=6,a.eth.net.getId();case 6:return r=e.sent,r!=window.networkid&&alert("请选择Kaleidochain网络"),i=new a.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:n}),l=new a.eth.Contract(window.minerabi,window.mineraddress),e.next=12,a.eth.getBlockNumber();case 12:return o=e.sent,e.next=15,i.methods.getCreatedWallets(n).call();case 15:s=e.sent,t.walletlist=[],c=0;case 18:if(!(c<s.length)){e.next=60;break}return u=new a.eth.Contract(window.Walletabi,s[c],{from:n}),e.t0=t.walletlist,e.t1=s[c],e.next=24,u.methods.owner().call();case 24:return e.t2=e.sent,e.next=27,u.methods.manager().call();case 27:return e.t3=e.sent,e.next=30,l.methods.isMinerOfHeight(o,s[c]).call();case 30:return e.t4=e.sent,e.next=33,u.methods.timeToStartUnlocking().call();case 33:return e.t5=e.sent,e.next=36,u.methods.timeInterval().call();case 36:return e.t6=e.sent,e.next=39,u.methods.timeToUnlockAll().call();case 39:return e.t7=e.sent,e.next=42,u.methods.amountOfEachUnlock().call();case 42:return e.t8=e.sent,e.next=45,u.methods.totalWithdrawals().call();case 45:return e.t9=e.sent,e.next=48,a.eth.getBalance(s[c]);case 48:return e.t10=e.sent,e.next=51,u.methods.unlocked().call();case 51:if(e.t11=e.sent,e.t12={address:e.t1,owner:e.t2,manager:e.t3,miner:e.t4,timeToStartUnlocking:e.t5,timeInterval:e.t6,timeToUnlockAll:e.t7,amountOfEachUnlock:e.t8,totalWithdrawals:e.t9,balance:e.t10,unlocked:e.t11},e.t0.push.call(e.t0,e.t12),!t.viewmodel){e.next=56;break}return e.abrupt("continue",57);case 56:u.events.allEvents({},function(e,n){return function(a,r){on(t,e,n)}}(c,u));case 57:c++,e.next=18;break;case 60:t.pagination.totalItems=s.length,dn(t);case 62:case"end":return e.stop()}},e)})),un.apply(this,arguments)}function dn(e){if(e.viewmodel)return!0;var t=e.web3,n=new t.eth.Contract(window.Factoryabi,window.FactoryAddress,{from:e.account});n.events.Instantiation({},function(){var a=Object(_["a"])(regeneratorRuntime.mark(function a(r,i){var l,o,s,c,u,d,m;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return l=e.walletlist.length,a.next=3,n.methods.getCreatedWallets(e.account).call();case 3:if(o=a.sent,s=o.length,l!=s){a.next=7;break}return a.abrupt("return");case 7:return a.next=9,t.eth.getBlockNumber();case 9:c=a.sent,u=new t.eth.Contract(window.minerabi,window.mineraddress),d=l;case 12:if(!(d<o.length)){a.next=52;break}return m=new t.eth.Contract(window.Walletabi,o[d]),a.t0=e.walletlist,a.t1=o[d],a.next=18,m.methods.owner().call();case 18:return a.t2=a.sent,a.next=21,m.methods.manager().call();case 21:return a.t3=a.sent,a.next=24,u.methods.isMinerOfHeight(c,o[d]).call();case 24:return a.t4=a.sent,a.next=27,m.methods.timeToStartUnlocking().call();case 27:return a.t5=a.sent,a.next=30,m.methods.timeInterval().call();case 30:return a.t6=a.sent,a.next=33,m.methods.timeToUnlockAll().call();case 33:return a.t7=a.sent,a.next=36,m.methods.amountOfEachUnlock().call();case 36:return a.t8=a.sent,a.next=39,m.methods.totalWithdrawals().call();case 39:return a.t9=a.sent,a.next=42,t.eth.getBalance(o[d]);case 42:return a.t10=a.sent,a.next=45,m.methods.unlocked().call();case 45:a.t11=a.sent,a.t12={address:a.t1,owner:a.t2,manager:a.t3,miner:a.t4,timeToStartUnlocking:a.t5,timeInterval:a.t6,timeToUnlockAll:a.t7,amountOfEachUnlock:a.t8,totalWithdrawals:a.t9,balance:a.t10,unlocked:a.t11},a.t0.push.call(a.t0,a.t12),m.events.allEvents({},function(t,n){return function(a,r){on(e,t,n)}}(d,m));case 49:d++,a.next=12;break;case 52:e.pagination.totalItems=o.length;case 53:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}())}function mn(e){for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r[0]==e)return r[1]}return""}var wn=Pt,pn=(n("df14"),Object(c["a"])(wn,Et,Lt,!1,null,null,null)),fn=pn.exports;d()(pn,{VBtn:R["a"],VCard:q["a"],VCardActions:G["a"],VCardText:G["b"],VCardTitle:ze["a"],VContainer:Q["a"],VContent:X["a"],VDataTable:Z["a"],VDialog:Ye["a"],VFlex:ee["a"],VLayout:te["a"],VPagination:ne["a"],VSpacer:j["a"],VTextField:$["a"],VToolbar:E["a"],VToolbarTitle:L["b"]});var vn={name:"Main",components:{Head:P,Content:fn,Foot:de},data:function(){return{}}},hn=vn,gn=Object(c["a"])(hn,jt,$t,!1,null,null,null),xn=gn.exports;d()(gn,{VApp:m["a"]}),a["a"].use(g["a"]);var bn=new g["a"]({routes:[{path:"/",name:"owner",component:Ze},{path:"/creator",name:"creator",component:xn},{path:"/manager",name:"manager",component:Bt},{path:"/transactions",name:"Transactions",component:fe}]});window.Web=v.a,window.Factoryabi=[{constant:!0,inputs:[{name:"creator",type:"address"}],name:"getCreatedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"getOwnedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfCreator",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"creator",type:"address"}],name:"getCreatedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"getOwnedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfManager",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_owner",type:"address"},{name:"_newOwner",type:"address"}],name:"replaceOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"",type:"address"},{name:"",type:"uint256"}],name:"walletsOfOwner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,name:"sender",type:"address"},{indexed:!1,name:"dapp",type:"address"}],name:"Instantiation",type:"event"},{constant:!1,inputs:[{name:"_manager",type:"address"},{name:"_owner",type:"address"},{name:"s",type:"uint64"},{name:"i",type:"uint64"},{name:"n",type:"uint256"},{name:"e",type:"uint64"}],name:"create",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"owner",type:"address"},{name:"s",type:"uint64"},{name:"i",type:"uint64"},{name:"n",type:"uint256"},{name:"e",type:"uint64"}],name:"create",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_manager",type:"address"},{name:"_newManager",type:"address"}],name:"replaceManager",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"_manager",type:"address"}],name:"getManagedCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_manager",type:"address"}],name:"getManagedWallets",outputs:[{name:"",type:"address[]"}],payable:!1,stateMutability:"view",type:"function"}],window.Walletabi=[{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"withdraw",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"manager",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalWithdrawals",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"unlocked",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timeToUnlockAll",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timeToStartUnlocking",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"timeInterval",outputs:[{name:"",type:"uint64"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_newOwner",type:"address"}],name:"replaceOwner",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalUnlocked",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"amountOfEachUnlock",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"factory",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"start",type:"uint64"},{name:"lifespan",type:"uint32"},{name:"vrfVerifier",type:"bytes32"},{name:"voteVerifier",type:"bytes32"}],name:"registerMiner",outputs:[{name:"suc",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[{name:"_owner",type:"address"},{name:"_manager",type:"address"},{name:"s",type:"uint64"},{name:"i",type:"uint64"},{name:"n",type:"uint256"},{name:"e",type:"uint64"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{payable:!0,stateMutability:"payable",type:"fallback"},{anonymous:!1,inputs:[{indexed:!1,name:"_manager",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Revocation",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"manager",type:"address"},{indexed:!1,name:"newManager",type:"address"}],name:"ManagerReplaced",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"sender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"owner",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Withdrew",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"owner",type:"address"},{indexed:!1,name:"newOwner",type:"address"}],name:"OwnerReplaced",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"owner",type:"address"}],name:"MinerRegistered",type:"event"},{constant:!1,inputs:[{name:"_value",type:"uint256"}],name:"revoke",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"newManager",type:"address"}],name:"replaceManager",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],window.minerabi=[{anonymous:!1,inputs:[{indexed:!1,name:"start",type:"uint256"},{indexed:!1,name:"miner",type:"address"}],name:"Added",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"start",type:"uint256"},{indexed:!1,name:"miner",type:"address"}],name:"Updated",type:"event"},{constant:!1,inputs:[{name:"start",type:"uint64"},{name:"lifespan",type:"uint32"},{name:"coinbase",type:"address"},{name:"vrfVerifier",type:"bytes32"},{name:"voteVerifier",type:"bytes32"}],name:"set",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"number",type:"uint256"},{name:"coinbase",type:"address"}],name:"setCoinbase",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"miner",type:"address"}],name:"get",outputs:[{name:"",type:"uint64"},{name:"",type:"uint32"},{name:"",type:"address"},{name:"",type:"bytes32"},{name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"addr",type:"address"}],name:"isMinerOfHeight",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"}],name:"getNewAddedMinersCount",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"number",type:"uint256"},{name:"index",type:"uint32"}],name:"getNewAddedMiner",outputs:[{name:"miner",type:"address"}],payable:!1,stateMutability:"view",type:"function"}],window.mineraddress="0x1000000000000000000000000000000000000002",window.host="https://api.kalscan.io/mainnet",window.FactoryAddress="0x7c46fdca570353a25b9ede8f0afc8dd6eda36d29",window.networkid=888,a["a"].config.productionTip=!1,new a["a"]({el:"#app",router:bn,components:{App:p},render:function(e){return e(p)}})},6172:function(e,t,n){},"9fe2":function(e,t,n){},a7f5:function(e,t,n){"use strict";var a=n("9fe2"),r=n.n(a);r.a},c85e:function(e,t,n){},df14:function(e,t,n){"use strict";var a=n("6172"),r=n.n(a);r.a},e679:function(e,t,n){},f5e0:function(e,t,n){"use strict";var a=n("e679"),r=n.n(a);r.a}});
//# sourceMappingURL=index.1c1fa385.js.map